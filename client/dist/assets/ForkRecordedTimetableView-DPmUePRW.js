import{d as ne,c as T,b as k,F as G,g as X,n as ke,a as s,t as x,B as _,I as re,o as D,_ as oe,D as me,E as C,q as A,G as ge,x as ve,e as O,f as ae,V as L,h as U,l as q,H as K,J,K as ee,L as de,N as be,O as fe,Q as je,S as ie,T as Q,W as ce,X as ze,Y as ue,s as xe,Z as le,$ as Ie,a0 as Re,a1 as z,a2 as Oe,a3 as Je,a4 as Xe,a5 as Ke,a6 as qe,a7 as Qe,a8 as Ze,a9 as et,aa as tt,ab as at,ac as nt,ad as ot,ae as rt,af as lt,ag as it,ah as st,ai as dt,aj as ct,ak as ut,z as mt,k as vt,al as ft,y as _t,C as kt}from"./index-jeTfvv1y.js";import{B as ht}from"./Breadcrumbs-ef_PRK2_.js";import{H as gt,N as bt}from"./Navigation-j3P9bLq6.js";import{S as yt}from"./SPHeaderBar-DPudxxAu.js";import{V as pt}from"./VDialog-CFVeVz-p.js";import{V as Dt,a as Tt,b as $t,c as Pt}from"./VCard-Bs2gms0D.js";import{V as He,c as wt}from"./ssrBoot-BzTsQDNj.js";import{M as Ae}from"./VAvatar-BSTpy5wt.js";import{V as St}from"./index-MTulLYPz.js";import{F as Ct}from"./ForkVideos-CTx0yHOz.js";import"./dialog-transition-CEYGGqGi.js";const Vt={class:"fork-recorded-timetable__date-section"},Mt={class:"fork-recorded-timetable__tab-container"},xt=["onClick"],It={class:"fork-recorded-timetable__tab-day"},Rt={class:"fork-recorded-timetable__tab-date"},Ot={class:"fork-recorded-timetable__tab-calendar-content"},Ht={class:"fork-recorded-timetable__tab-calendar-text"},At={class:"fork-recorded-timetable__tab-day"},Et={class:"fork-recorded-timetable__tab-date"},Nt=ne({__name:"ForkRecordedTimetableDateTabs",props:{weekTabs:{},isOutsideWeekRange:{type:Boolean},calendarTabContent:{}},emits:["tabClick","showCalendar"],setup(e){return(t,o)=>(D(),T("div",Vt,[k("div",Mt,[(D(!0),T(G,null,X(t.weekTabs,n=>(D(),T("div",{key:n.date.toDateString(),class:ke(["fork-recorded-timetable__tab",{"fork-recorded-timetable__tab--selected":n.isSelected,"fork-recorded-timetable__tab--today":n.isToday}]),onClick:a=>t.$emit("tabClick",n)},[k("div",It,x(n.dayOfWeek),1),k("div",Rt,x(n.label),1)],10,xt))),128)),k("div",{class:ke(["fork-recorded-timetable__tab fork-recorded-timetable__tab--calendar",{"fork-recorded-timetable__tab--selected":t.isOutsideWeekRange}]),onClick:o[0]||(o[0]=n=>t.$emit("showCalendar"))},[k("div",Ot,[k("div",Ht,[k("div",At,x(t.calendarTabContent.day),1),k("div",Et,x(t.calendarTabContent.date),1)]),s(_(re),{icon:"fluent:calendar-ltr-20-regular",class:"fork-recorded-timetable__tab-calendar-icon"})])],2)])]))}}),Bt=oe(Nt,[["__scopeId","data-v-1ee51310"]]),Z=3.5,Ee=Z*60,_e=4,pe=24,Lt=25,Wt=Ee,he=60,Yt=60,Ft=(e,t)=>({setInitialScrollPosition:async()=>{if(await me(),!e.value)return;const a=new Date,r=new Date(t.value);r.setHours(_e,0,0,0);const d=Math.floor((a.getTime()-r.getTime())/(1e3*60));if(d>=0&&d<=1440){const l=d*Z,u=(e.value.clientHeight-he)/2,c=Math.max(0,l-u);e.value.scrollTop=c}else{const l=120*Z,u=(e.value.clientHeight-he)/2,c=Math.max(0,l-u);e.value.scrollTop=c}},scrollToTimePeriod:a=>{if(!e.value)return;const r=a*Ee;e.value.scrollTo({top:r,behavior:"smooth"})}}),Gt=e=>{const t=C(()=>{const n=[],a=new Date(e.value);a.setHours(_e,0,0,0);for(let r=0;r<pe;r++){const d=new Date(a.getTime()+r*60*60*1e3),l=d.toLocaleDateString("ja-JP",{month:"numeric",day:"numeric"}),i=d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});n.push({label:`${l} ${i}`,date:l,time:i})}return n}),o=C(()=>pe*60*Z);return{timeHours:t,timetableHeight:o}},Ut=e=>{const t=A(!1),o=A(null),n=A({});let a=null,r=null;return{tooltipVisible:t,tooltipProgram:o,tooltipStyle:n,showTooltip:(c,f)=>{var h;a!==null&&(clearTimeout(a),a=null),r!==null&&(clearTimeout(r),r=null);const R=f.currentTarget.getBoundingClientRect();if(!((h=e.value)==null?void 0:h.getBoundingClientRect()))return;const b=window.innerWidth/2,P=R.left<b,$=350,v=8;let M,w;P?M=R.right+v:M=R.left-$-v,w=R.top,M+$>window.innerWidth&&(M=window.innerWidth-$-16),M<16&&(M=16),w+200>window.innerHeight&&(w=window.innerHeight-200-16),w<16&&(w=16),r=window.setTimeout(()=>{o.value=c,t.value=!0,n.value={left:`${M}px`,top:`${w}px`}},300)},hideTooltip:()=>{r!==null&&(clearTimeout(r),r=null),a=window.setTimeout(()=>{t.value=!1,o.value=null},200)},onTooltipMouseEnter:()=>{a!==null&&(clearTimeout(a),a=null)},onTooltipMouseLeave:()=>{t.value=!1,o.value=null}}},Ne=e=>{const t=e.getMonth()+1,o=e.getDate();return`${t}/${o}`},De=e=>e.toLocaleDateString("ja-JP",{year:"numeric",month:"numeric",day:"numeric"}),Te=e=>e.toLocaleDateString("ja-JP",{weekday:"short"}),jt=e=>{if(e instanceof Date){const t=e.getFullYear(),o=e.getMonth(),n=e.getDate();return new Date(t,o,n)}else if(typeof e=="string"){const[t,o,n]=e.split("-").map(Number);return new Date(t,o-1,n)}else return new Date},zt=e=>e>=4?e-4:20+e,Jt=e=>new Date(e).getMinutes().toString().padStart(2,"0"),Xt=(e,t)=>{if(!e||!t)return"";const o=new Date(e),n=new Date(o.getTime()+t*1e3),a=r=>r.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${a(o)} 〜 ${a(n)}`},Kt=e=>{const t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},qt=e=>e>=1024*1024*1024?`${(e/(1024*1024*1024)).toFixed(2)} GB`:e>=1024*1024?`${(e/(1024*1024)).toFixed(2)} MB`:`${(e/1024).toFixed(2)} KB`,Qt={"ニュース・報道":{r:59,g:130,b:246},スポーツ:{r:34,g:197,b:94},"情報・ワイドショー":{r:249,g:115,b:22},ドラマ:{r:236,g:72,b:153},音楽:{r:168,g:85,b:247},バラエティ:{r:234,g:179,b:8},映画:{r:239,g:68,b:68},"アニメ・特撮":{r:6,g:182,b:212},"ドキュメンタリー・教養":{r:161,g:98,b:7},"劇場・公演":{r:147,g:51,b:234},"趣味・教育":{r:20,g:184,b:166},福祉:{r:132,g:204,b:22},その他:{r:107,g:114,b:128}},B={NORMAL:.08,SINGLE:.12,HOVER:.14,SINGLE_HOVER:.18,STRIPE:1},ye=(e,t=3)=>!e||e.length===0?[]:e.slice(0,t).map(o=>Qt[o.major]).filter(o=>o!==void 0),Zt=e=>{const t=ye(e);if(t.length===0)return null;const o=t.map(n=>`rgba(${n.r}, ${n.g}, ${n.b}, ${B.STRIPE})`);return o.length===1?o[0]:o.length===2?`linear-gradient(to bottom, ${o[0]} 0%, ${o[0]} 50%, ${o[1]} 50%, ${o[1]} 100%)`:`linear-gradient(to bottom, ${o[0]} 0%, ${o[0]} 33.33%, ${o[1]} 33.33%, ${o[1]} 66.66%, ${o[2]} 66.66%, ${o[2]} 100%)`},ea=e=>{const t=ye(e),o="rgb(var(--v-theme-surface))";if(t.length===0)return o;if(t.length===1){const n=t[0];return`linear-gradient(rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE}), rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE})), ${o}`}else if(t.length===2){const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.NORMAL}) 100%), ${o}`}else{const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.NORMAL}) 100%), ${o}`}},ta=e=>{const t=ye(e),o="rgb(var(--v-theme-surface))";if(t.length===0)return"rgb(var(--v-theme-primary-lighten-4))";if(t.length===1){const n=t[0];return`linear-gradient(rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE_HOVER}), rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE_HOVER})), ${o}`}else if(t.length===2){const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.HOVER}) 100%), ${o}`}else{const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.HOVER}) 100%), ${o}`}},aa=(e,t,o)=>{const n=new Date(e.start_time),a=new Date(o);a.setHours(_e,0,0,0);const r=Math.floor((n.getTime()-a.getTime())/(1e3*60)),d=e.duration/60,l=r*Z,i=Math.max(d*Z,Lt),u=ea(e.genres),c=Zt(e.genres),f=ta(e.genres),y={position:"absolute",top:`${l}px`,height:`${i}px`,width:"100%",left:"0",zIndex:String(t)};return u&&(y.background=u),c&&(y["--genre-stripe"]=c),f&&(y["--genre-bg-hover"]=f),y},na=(e,t)=>{const o=new Date(t);o.setHours(_e,0,0,0);const n=Math.floor((e.getTime()-o.getTime())/(1e3*60));return n<0||n>24*60?null:n*Z},oa={class:"fork-recorded-timetable__grid"},ra={class:"fork-recorded-timetable__time-column"},la={class:"fork-recorded-timetable__time-date"},ia={class:"fork-recorded-timetable__time-hour"},sa=["onClick","onMouseenter"],da={class:"fork-recorded-timetable__program-content"},ca={class:"fork-recorded-timetable__program-minutes"},ua={class:"fork-recorded-timetable__program-info"},ma={class:"fork-recorded-timetable__program-title"},va={key:0,class:"fork-recorded-timetable__program-subtitle"},fa={key:1,class:"fork-recorded-timetable__program-description"},_a={class:"fork-recorded-timetable__tooltip-time"},ka={class:"fork-recorded-timetable__tooltip-title"},ha={key:0,class:"fork-recorded-timetable__tooltip-subtitle"},ga={key:1,class:"fork-recorded-timetable__tooltip-description"},ba={key:2,class:"fork-recorded-timetable__tooltip-genres"},ya={class:"fork-recorded-timetable__tooltip-genre-list"},pa={key:3,class:"fork-recorded-timetable__tooltip-video-info"},Da={class:"fork-recorded-timetable__tooltip-info-grid"},Ta={key:0},$a={class:"fork-recorded-timetable__tooltip-info-value"},Pa={key:1},wa={class:"fork-recorded-timetable__tooltip-info-value"},Sa={key:2},Ca={class:"fork-recorded-timetable__tooltip-info-value"},Va={key:3},Ma={class:"fork-recorded-timetable__tooltip-info-value"},xa={key:4,class:"fork-recorded-timetable__tooltip-detail"},Ia={key:0,class:"fork-recorded-timetable__tooltip-detail-section"},Ra={class:"fork-recorded-timetable__tooltip-label"},Oa={class:"fork-recorded-timetable__tooltip-detail-content"},Ha=ne({__name:"ForkRecordedTimetableGrid",props:{programs:{},channels:{},displayDate:{},currentTime:{}},emits:["programClick"],setup(e,{expose:t}){const o=e,n=A(null),a=ge(o,"displayDate"),{timeHours:r,timetableHeight:d}=Gt(a),{setInitialScrollPosition:l,scrollToTimePeriod:i}=Ft(n,a),{tooltipVisible:u,tooltipProgram:c,tooltipStyle:f,showTooltip:y,hideTooltip:R,onTooltipMouseEnter:m,onTooltipMouseLeave:b}=Ut(n),P=C(()=>{const w=o.channels.length;return`${Yt}px repeat(${w}, 1fr)`}),$=w=>o.programs.filter(h=>h.channel_id===w).sort((h,N)=>new Date(h.start_time).getTime()-new Date(N.start_time).getTime()),v=(w,h)=>aa(w,h,o.displayDate),M=()=>{const w=na(o.currentTime,o.displayDate);return w===null?{display:"none"}:{position:"absolute",top:`${w}px`,left:"0",right:"0",height:"2px",background:"#ff4444",zIndex:20,gridColumn:"1 / -1",gridRow:2,pointerEvents:"none"}};return t({scrollToTimePeriod:i,setInitialScrollPosition:l}),ve(()=>{l()}),(w,h)=>{var N,W,Y,g,I,H,V,S,E,j;return D(),T("div",oa,[k("div",{class:"fork-recorded-timetable__body",ref_key:"scrollContainer",ref:n},[k("div",{class:"fork-recorded-timetable__grid-container",style:ae({gridTemplateColumns:P.value,height:`${_(d)+_(he)}px`})},[h[3]||(h[3]=k("div",{class:"fork-recorded-timetable__time-column-header"},"時間",-1)),(D(!0),T(G,null,X(w.channels,p=>(D(),T("div",{key:p.id,class:"fork-recorded-timetable__channel-header"},x(p.name),1))),128)),k("div",ra,[(D(!0),T(G,null,X(_(r),p=>(D(),T("div",{key:p.label,class:"fork-recorded-timetable__time-label",style:ae({height:`${_(Wt)}px`})},[k("div",la,x(p.date),1),k("div",ia,x(p.time),1)],4))),128))]),(D(!0),T(G,null,X(w.channels,(p,te)=>(D(),T("div",{key:p.id,class:"fork-recorded-timetable__channel-column",style:ae({gridColumn:te+2,gridRowStart:2})},[(D(!0),T(G,null,X($(p.id),(F,Ue)=>(D(),T("div",{key:F.id,class:"fork-recorded-timetable__program-item",style:ae(v(F,Ue)),onClick:se=>w.$emit("programClick",F),onMouseenter:se=>_(y)(F,se),onMouseleave:h[0]||(h[0]=(...se)=>_(R)&&_(R)(...se))},[k("div",da,[k("div",ca,x(_(Jt)(F.start_time)),1),k("div",ua,[k("div",ma,x(F.title),1),F.subtitle?(D(),T("div",va,x(F.subtitle),1)):O("",!0),F.description?(D(),T("div",fa,x(F.description),1)):O("",!0)])])],44,sa))),128))],4))),128)),k("div",{class:"fork-recorded-timetable__current-time-line",style:ae(M())},null,4)],4)],512),_(u)?(D(),T("div",{key:0,class:"fork-recorded-timetable__tooltip",style:ae(_(f)),onMouseenter:h[1]||(h[1]=(...p)=>_(m)&&_(m)(...p)),onMouseleave:h[2]||(h[2]=(...p)=>_(b)&&_(b)(...p))},[k("div",_a,x(_(Xt)((N=_(c))==null?void 0:N.start_time,(W=_(c))==null?void 0:W.duration)),1),k("div",ka,x((Y=_(c))==null?void 0:Y.title),1),(g=_(c))!=null&&g.subtitle?(D(),T("div",ha,x((I=_(c))==null?void 0:I.subtitle),1)):O("",!0),(H=_(c))!=null&&H.description?(D(),T("div",ga,x((V=_(c))==null?void 0:V.description),1)):O("",!0),(S=_(c))!=null&&S.genres&&_(c).genres.length>0?(D(),T("div",ba,[h[4]||(h[4]=k("div",{class:"fork-recorded-timetable__tooltip-label"},"ジャンル",-1)),k("div",ya,[(D(!0),T(G,null,X(_(c).genres,(p,te)=>(D(),T("span",{key:te,class:"fork-recorded-timetable__tooltip-genre-tag"},x(p.major)+x(p.middle?` / ${p.middle}`:""),1))),128))])])):O("",!0),(E=_(c))!=null&&E.recorded_video?(D(),T("div",pa,[h[9]||(h[9]=k("div",{class:"fork-recorded-timetable__tooltip-label"},"録画情報",-1)),k("div",Da,[_(c).recorded_video.video_resolution_width&&_(c).recorded_video.video_resolution_height?(D(),T("div",Ta,[h[5]||(h[5]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"解像度:",-1)),k("span",$a,x(_(c).recorded_video.video_resolution_width)+"×"+x(_(c).recorded_video.video_resolution_height),1)])):O("",!0),_(c).recorded_video.video_codec?(D(),T("div",Pa,[h[6]||(h[6]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"映像:",-1)),k("span",wa,x(_(c).recorded_video.video_codec),1)])):O("",!0),_(c).recorded_video.duration?(D(),T("div",Sa,[h[7]||(h[7]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"実録画時間:",-1)),k("span",Ca,x(_(Kt)(_(c).recorded_video.duration)),1)])):O("",!0),_(c).recorded_video.file_size?(D(),T("div",Va,[h[8]||(h[8]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"ファイルサイズ:",-1)),k("span",Ma,x(_(qt)(_(c).recorded_video.file_size)),1)])):O("",!0)])])):O("",!0),(j=_(c))!=null&&j.detail?(D(),T("div",xa,[(D(!0),T(G,null,X(_(c).detail,(p,te)=>(D(),T(G,{key:te},[p?(D(),T("div",Ia,[k("div",Ra,x(te),1),k("div",Oa,x(p),1)])):O("",!0)],64))),128))])):O("",!0)],36)):O("",!0)])}}}),Aa=oe(Ha,[["__scopeId","data-v-2ca03811"]]),Ea={class:"fork-recorded-timetable__header"},Na={class:"fork-recorded-timetable__title"},Ba={class:"fork-recorded-timetable__title-text"},La={key:0,class:"fork-recorded-timetable__title-loading"},Wa={key:1,class:"fork-recorded-timetable__title-count"},Ya={class:"fork-recorded-timetable__controls"},Fa={class:"fork-recorded-timetable__date-display ml-4"},Ga=ne({__name:"ForkRecordedTimetableHeader",props:{title:{},isLoading:{type:Boolean},totalPrograms:{},currentDateLabel:{}},emits:["previousDay","today","nextDay"],setup(e){return(t,o)=>(D(),T("div",Ea,[k("div",Na,[k("span",Ba,x(t.title),1),t.isLoading?(D(),T("span",La,[s(_(re),{icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"}),o[3]||(o[3]=k("span",null,"読み込み中...",-1))])):O("",!0),t.isLoading?O("",!0):(D(),T("span",Wa,x(t.totalPrograms)+"件の録画番組 ",1))]),k("div",Ya,[s(L,{variant:"outlined",size:"small",onClick:o[0]||(o[0]=n=>t.$emit("previousDay")),class:"mr-2"},{default:U(()=>[s(_(re),{icon:"fluent:chevron-left-20-regular",width:"18px"}),o[4]||(o[4]=q(" 前日 ",-1))]),_:1,__:[4]}),s(L,{variant:"outlined",color:"primary",onClick:o[1]||(o[1]=n=>t.$emit("today")),class:"mr-2"},{default:U(()=>[s(_(re),{icon:"fluent:calendar-ltr-20-regular",width:"18px",class:"mr-1"}),o[5]||(o[5]=q(" 今日 ",-1))]),_:1,__:[5]}),s(L,{variant:"outlined",size:"small",onClick:o[2]||(o[2]=n=>t.$emit("nextDay"))},{default:U(()=>[o[6]||(o[6]=q(" 翌日 ",-1)),s(_(re),{icon:"fluent:chevron-right-20-regular",width:"18px",class:"ml-1"})]),_:1,__:[6]}),k("div",Fa,x(t.currentDateLabel),1)])]))}}),Ua=oe(Ga,[["__scopeId","data-v-ed3cc0c7"]]),ja={class:"fork-recorded-timetable__time-section"},za={class:"fork-recorded-timetable__time-buttons"},Ja=["onClick"],Xa={class:"fork-recorded-timetable__time-button-label"},Ka={class:"fork-recorded-timetable__time-button-time"},qa=ne({__name:"ForkRecordedTimetableTimePeriods",props:{timePeriods:{},selectedTimePeriod:{}},emits:["scrollToPeriod"],setup(e){return(t,o)=>(D(),T("div",ja,[k("div",za,[(D(!0),T(G,null,X(t.timePeriods,n=>(D(),T("button",{key:n.key,class:ke(["fork-recorded-timetable__time-button",{"fork-recorded-timetable__time-button--selected":t.selectedTimePeriod===n.key}]),onClick:a=>t.$emit("scrollToPeriod",n)},[k("span",Xa,x(n.label),1),k("span",Ka,x(n.startTime),1)],10,Ja))),128))])]))}}),Qa=oe(qa,[["__scopeId","data-v-1a487513"]]),Za=(e,t,o)=>t?"今日":o===1?"昨日":Ne(e),en=e=>{const t=C(()=>{const a=[],r=new Date;for(let d=0;d>=-6;d--){const l=new Date(r);l.setDate(r.getDate()+d);const i=d===0,u=l.toDateString()===e.value.toDateString();a.push({date:new Date(l),label:Za(l,i,Math.abs(d)),isToday:i,isSelected:u,dayOfWeek:Te(l),daysAgo:Math.abs(d)})}return a}),o=C(()=>{const a=new Date,r=e.value.toDateString();for(let d=0;d>=-6;d--){const l=new Date(a);if(l.setDate(a.getDate()+d),l.toDateString()===r)return!1}return!0}),n=C(()=>o.value?{day:Te(e.value),date:Ne(e.value)}:{day:"日付",date:"選択"});return{weekTabs:t,isOutsideWeekRange:o,calendarTabContent:n}},tn=[{key:"morning",label:"朝",startTime:"04:00",hour:4},{key:"noon",label:"昼",startTime:"10:00",hour:10},{key:"evening",label:"夕",startTime:"16:00",hour:16},{key:"midnight",label:"深夜",startTime:"21:00",hour:21}],Be=J({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},modeIcon:{type:de,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),$e=K()({name:"VDatePickerControls",props:Be(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:o}=t;const n=C(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=C(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),r=C(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),d=C(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function l(){o("click:prev")}function i(){o("click:next")}function u(){o("click:year")}function c(){o("click:month")}return ee(()=>s("div",{class:["v-date-picker-controls"]},[s(L,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:n.value,text:e.text,variant:"text",rounded:!0,onClick:c},null),s(L,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:u},null),s(He,null,null),s("div",{class:"v-date-picker-controls__month"},[s(L,{"data-testid":"prev-month",disabled:r.value,icon:e.prevIcon,variant:"text",onClick:l},null),s(L,{"data-testid":"next-month",disabled:d.value,icon:e.nextIcon,variant:"text",onClick:i},null)])])),{}}}),an=J({appendIcon:de,color:String,header:String,transition:String,onClick:je()},"VDatePickerHeader"),Pe=K()({name:"VDatePickerHeader",props:an(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:o,slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=be(e,"color");function d(){o("click")}function l(){o("click:append")}return ee(()=>{const i=!!(n.default||e.header),u=!!(n.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:r.value,onClick:d},[n.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[n.prepend()]),i&&s(Ae,{key:"content",name:e.transition},{default:()=>{var c;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((c=n.default)==null?void 0:c.call(n))??e.header])]}}),u&&s("div",{class:"v-date-picker-header__append"},[n.append?s(fe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var c;return[(c=n.append)==null?void 0:c.call(n)]}}):s(L,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:l},null)])])}),{}}}),nn=J({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function on(e){const t=ie(),o=Q(e,"modelValue",[],m=>ce(m).map(b=>t.date(b))),n=C(()=>e.displayValue?t.date(e.displayValue):o.value.length>0?t.date(o.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=Q(e,"year",void 0,m=>{const b=m!=null?Number(m):t.getYear(n.value);return t.startOfYear(t.setYear(t.date(),b))},m=>t.getYear(m)),r=Q(e,"month",void 0,m=>{const b=m!=null?Number(m):t.getMonth(n.value),P=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(P,b)},m=>t.getMonth(m)),d=C(()=>e.firstDayOfWeek??e.weekdays[0]),l=C(()=>{const m=Number(e.firstDayOfWeek??0);return e.weekdays.map(b=>(b+m)%7)}),i=C(()=>{const m=t.getWeekArray(r.value,d.value),b=m.flat(),P=6*7;if(e.weeksInMonth==="static"&&b.length<P){const $=b[b.length-1];let v=[];for(let M=1;M<=P-b.length;M++)v.push(t.addDays($,M)),M%7===0&&(m.push(v),v=[])}return m});function u(m,b){return m.filter(P=>l.value.includes(t.toJsDate(P).getDay())).map((P,$)=>{const v=t.toISO(P),M=!t.isSameMonth(P,r.value),w=t.isSameDay(P,t.startOfMonth(r.value)),h=t.isSameDay(P,t.endOfMonth(r.value)),N=t.isSameDay(P,r.value);return{date:P,isoDate:v,formatted:t.format(P,"keyboardDate"),year:t.getYear(P),month:t.getMonth(P),isDisabled:R(P),isWeekStart:$%7===0,isWeekEnd:$%7===6,isToday:t.isSameDay(P,b),isAdjacent:M,isHidden:M&&!e.showAdjacentMonths,isStart:w,isSelected:o.value.some(W=>t.isSameDay(P,W)),isEnd:h,isSame:N,localized:t.format(P,"dayOfMonth")}})}const c=C(()=>{const m=t.startOfWeek(n.value,e.firstDayOfWeek),b=[];for(let $=0;$<=6;$++)b.push(t.addDays(m,$));const P=t.date();return u(b,P)}),f=C(()=>{const m=i.value.flat(),b=t.date();return u(m,b)}),y=C(()=>i.value.map(m=>m.length?ze(t,m[0]):null));function R(m){if(e.disabled)return!0;const b=t.date(m);return e.min&&t.isAfter(t.date(e.min),b)||e.max&&t.isAfter(b,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(P=>t.isSameDay(t.date(P),b)):typeof e.allowedDates=="function"?!e.allowedDates(b):!1}return{displayValue:n,daysInMonth:f,daysInWeek:c,genDays:u,model:o,weeksInMonth:i,weekDays:l,weekNumbers:y}}const Le=J({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...le(nn(),["displayValue"])},"VDatePickerMonth"),we=K()({name:"VDatePickerMonth",props:Le(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=A(),{daysInMonth:r,model:d,weekNumbers:l}=on(e),i=ie(),u=ue(),c=ue(),f=ue(!1),y=C(()=>f.value?e.reverseTransition:e.transition);e.multiple==="range"&&d.value.length>0&&(u.value=d.value[0],d.value.length>1&&(c.value=d.value[d.value.length-1]));const R=C(()=>{const $=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return d.value.length>=$});xe(r,($,v)=>{v&&(f.value=i.isBefore($[0].date,v[0].date))});function m($){const v=i.startOfDay($);if(d.value.length===0?u.value=void 0:d.value.length===1&&(u.value=d.value[0],c.value=void 0),!u.value)u.value=v,d.value=[u.value];else if(c.value)u.value=$,c.value=void 0,d.value=[u.value];else{if(i.isSameDay(v,u.value)){u.value=void 0,d.value=[];return}else i.isBefore(v,u.value)?(c.value=i.endOfDay(u.value),u.value=v):c.value=i.endOfDay(v);const M=i.getDiff(c.value,u.value,"days"),w=[u.value];for(let h=1;h<M;h++){const N=i.addDays(u.value,h);w.push(N)}w.push(c.value),d.value=w}}function b($){const v=d.value.findIndex(M=>i.isSameDay(M,$));if(v===-1)d.value=[...d.value,$];else{const M=[...d.value];M.splice(v,1),d.value=M}}function P($){e.multiple==="range"?m($):e.multiple?b($):d.value=[$]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[q(" ")]),l.value.map($=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[$]))]),s(Ae,{name:y.value},{default:()=>{var $;return[s("div",{ref:a,key:($=r.value[0].date)==null?void 0:$.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&i.getWeekdays(e.firstDayOfWeek).map(v=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[v])),r.value.map((v,M)=>{const w={props:{onClick:()=>P(v.date)},item:v,i:M};return R.value&&!v.isSelected&&(v.isDisabled=!0),s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}],"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&s(fe,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(v.isSelected||v.isToday)&&!v.isDisabled?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,text:v.localized,variant:v.isDisabled?v.isToday?"outlined":"text":v.isToday&&!v.isSelected?"outlined":"flat",onClick:()=>P(v.date)}}},{default:()=>{var h;return[((h=n.day)==null?void 0:h.call(n,w))??s(L,w.props,null)]}})])})])]}})])}}),We=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Se=K()({name:"VDatePickerMonths",props:We(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=ie(),r=Q(e,"modelValue"),d=C(()=>{let l=a.startOfYear(a.date());return e.year&&(l=a.setYear(l,e.year)),Ie(12).map(i=>{const u=a.format(l,"monthShort"),c=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),l)||e.max&&a.isAfter(l,a.startOfMonth(a.date(e.max))));return l=a.getNextMonth(l),{isDisabled:c,text:u,value:i}})});return Re(()=>{r.value=r.value??a.getMonth(a.date())}),ee(()=>s("div",{class:"v-date-picker-months",style:{height:Oe(e.height)}},[s("div",{class:"v-date-picker-months__content"},[d.value.map((l,i)=>{var f;const u={active:r.value===i,color:r.value===i?e.color:void 0,disabled:l.isDisabled,rounded:!0,text:l.text,variant:r.value===l.value?"flat":"text",onClick:()=>c(i)};function c(y){if(r.value===y){o("update:modelValue",r.value);return}r.value=y}return((f=n.month)==null?void 0:f.call(n,{month:l,i,props:u}))??s(L,z({key:"month"},u),null)})])])),{}}}),Ye=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ce=K()({name:"VDatePickerYears",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=ie(),r=Q(e,"modelValue"),d=C(()=>{const i=a.getYear(a.date());let u=i-100,c=i+52;e.min&&(u=a.getYear(a.date(e.min))),e.max&&(c=a.getYear(a.date(e.max)));let f=a.startOfYear(a.date());return f=a.setYear(f,u),Ie(c-u+1,u).map(y=>{const R=a.format(f,"year");return f=a.setYear(f,a.getYear(f)+1),{text:R,value:y}})});Re(()=>{r.value=r.value??a.getYear(a.date())});const l=Je();return ve(async()=>{var i;await me(),(i=l.el)==null||i.scrollIntoView({block:"center"})}),ee(()=>s("div",{class:"v-date-picker-years",style:{height:Oe(e.height)}},[s("div",{class:"v-date-picker-years__content"},[d.value.map((i,u)=>{var f;const c={ref:r.value===i.value?l:void 0,active:r.value===i.value,color:r.value===i.value?e.color:void 0,rounded:!0,text:i.text,variant:r.value===i.value?"flat":"text",onClick:()=>{if(r.value===i.value){o("update:modelValue",r.value);return}r.value=i.value}};return((f=n.year)==null?void 0:f.call(n,{year:i,i:u,props:c}))??s(L,z({key:"month"},c),null)})])])),{}}}),rn=wt("v-picker-title"),Fe=J({color:String,...ct(),...dt(),...st(),...it(),...lt(),...rt(),...ot(),...nt(),...at()},"VSheet"),Ve=K()({name:"VSheet",props:Fe(),setup(e,t){let{slots:o}=t;const{themeClasses:n}=Xe(e),{backgroundColorClasses:a,backgroundColorStyles:r}=be(ge(e,"color")),{borderClasses:d}=Ke(e),{dimensionStyles:l}=qe(e),{elevationClasses:i}=Qe(e),{locationStyles:u}=Ze(e),{positionClasses:c}=et(e),{roundedClasses:f}=tt(e);return ee(()=>s(e.tag,{class:["v-sheet",n.value,a.value,d.value,i.value,c.value,f.value,e.class],style:[r.value,l.value,u.value,e.style]},o)),{}}}),Ge=J({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Fe()},"VPicker"),Me=K()({name:"VPicker",props:Ge(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:n,backgroundColorStyles:a}=be(ge(e,"color"));return ee(()=>{const r=Ve.filterProps(e),d=!!(e.title||o.title);return s(Ve,z(r,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var l;return[!e.hideHeader&&s("div",{key:"header",class:[n.value],style:[a.value]},[d&&s(rn,{key:"picker-title"},{default:()=>{var i;return[((i=o.title)==null?void 0:i.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(l=o.default)==null?void 0:l.call(o)]),o.actions&&s(fe,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),ln=J({header:{type:String,default:"$vuetify.datePicker.header"},...Be(),...Le({weeksInMonth:"static"}),...le(We(),["modelValue"]),...le(Ye(),["modelValue"]),...Ge({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),sn=K()({name:"VDatePicker",props:ln(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=ie(),{t:r}=ut(),d=Q(e,"modelValue",void 0,g=>ce(g).map(I=>a.date(I)),g=>e.multiple?g:g[0]),l=Q(e,"viewMode"),i=C(()=>{const g=a.date(e.min);return e.min&&a.isValid(g)?g:null}),u=C(()=>{const g=a.date(e.max);return e.max&&a.isValid(g)?g:null}),c=C(()=>{var H;const g=a.date();let I=g;return(H=d.value)!=null&&H[0]?I=a.date(d.value[0]):i.value&&a.isBefore(g,i.value)?I=i.value:u.value&&a.isAfter(g,u.value)&&(I=u.value),I&&a.isValid(I)?I:g}),f=A(Number(e.month??a.getMonth(a.startOfMonth(c.value)))),y=A(Number(e.year??a.getYear(a.startOfYear(a.setMonth(c.value,f.value))))),R=ue(!1),m=C(()=>e.multiple&&d.value.length>1?r("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&a.isValid(d.value[0])?a.format(a.date(d.value[0]),"normalDateWithWeekday"):r(e.header)),b=C(()=>{let g=a.date();return g=a.setDate(g,1),g=a.setMonth(g,f.value),g=a.setYear(g,y.value),a.format(g,"monthAndYear")}),P=C(()=>`date-picker-header${R.value?"-reverse":""}-transition`),$=C(()=>{if(e.disabled)return!0;const g=[];if(l.value!=="month")g.push("prev","next");else{let I=a.date();if(I=a.startOfMonth(I),I=a.setMonth(I,f.value),I=a.setYear(I,y.value),i.value){const H=a.addDays(a.startOfMonth(I),-1);a.isAfter(i.value,H)&&g.push("prev")}if(u.value){const H=a.addDays(a.endOfMonth(I),1);a.isAfter(H,u.value)&&g.push("next")}}return g});function v(){f.value<11?f.value++:(y.value++,f.value=0,Y(y.value)),W(f.value)}function M(){f.value>0?f.value--:(y.value--,f.value=11,Y(y.value)),W(f.value)}function w(){l.value="month"}function h(){l.value=l.value==="months"?"month":"months"}function N(){l.value=l.value==="year"?"month":"year"}function W(g){l.value==="months"&&h(),o("update:month",g)}function Y(g){l.value==="year"&&N(),o("update:year",g)}return xe(d,(g,I)=>{const H=ce(I),V=ce(g);if(!V.length)return;const S=a.date(H[H.length-1]),E=a.date(V[V.length-1]),j=a.getMonth(E),p=a.getYear(E);j!==f.value&&(f.value=j,W(f.value)),p!==y.value&&(y.value=p,Y(y.value)),R.value=a.isBefore(S,E)}),ee(()=>{const g=Me.filterProps(e),I=$e.filterProps(e),H=Pe.filterProps(e),V=we.filterProps(e),S=le(Se.filterProps(e),["modelValue"]),E=le(Ce.filterProps(e),["modelValue"]),j={header:m.value,transition:P.value};return s(Me,z(g,{class:["v-date-picker",`v-date-picker--${l.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var p;return((p=n.title)==null?void 0:p.call(n))??s("div",{class:"v-date-picker__title"},[r(e.title)])},header:()=>n.header?s(fe,{defaults:{VDatePickerHeader:{...j}}},{default:()=>{var p;return[(p=n.header)==null?void 0:p.call(n,j)]}}):s(Pe,z({key:"header"},H,j,{onClick:l.value!=="month"?w:void 0}),{...n,default:void 0}),default:()=>s(G,null,[s($e,z(I,{disabled:$.value,text:b.value,"onClick:next":v,"onClick:prev":M,"onClick:month":h,"onClick:year":N}),null),s(St,{hideOnLeave:!0},{default:()=>[l.value==="months"?s(Se,z({key:"date-picker-months"},S,{modelValue:f.value,"onUpdate:modelValue":[p=>f.value=p,W],min:i.value,max:u.value,year:y.value}),null):l.value==="year"?s(Ce,z({key:"date-picker-years"},E,{modelValue:y.value,"onUpdate:modelValue":[p=>y.value=p,Y],min:i.value,max:u.value}),null):s(we,z({key:"date-picker-month"},V,{modelValue:d.value,"onUpdate:modelValue":p=>d.value=p,month:f.value,"onUpdate:month":[p=>f.value=p,W],year:y.value,"onUpdate:year":[p=>y.value=p,Y],min:i.value,max:u.value}),null)]})]),actions:n.actions})}),{}}}),dn={class:"fork-recorded-timetable"},cn={class:"fork-recorded-timetable__navigation"},un={class:"fork-recorded-timetable__content"},mn={key:1,class:"fork-recorded-timetable__loading"},vn=ne({__name:"ForkRecordedTimetable",props:{title:{},programs:{default:()=>[]},channels:{default:()=>[]},isLoading:{type:Boolean,default:!1}},emits:["programClick","fetchProgramData"],setup(e,{emit:t}){const o=e,n=t,a=A(new Date),r=A(!1),d=A(new Date().toISOString().substring(0,10)),l=A(""),i=A(new Date),u=A(null);let c=null;const{weekTabs:f,isOutsideWeekRange:y,calendarTabContent:R}=en(a),m=tn,b=C(()=>o.channels||[]),P=C(()=>o.programs||[]),$=C(()=>{const V=a.value,S=new Date(V);return S.setDate(V.getDate()+1),`${De(V)} 4:00 〜 ${De(S)} 4:00`}),v=C(()=>P.value.length),M=V=>{n("programClick",V)},w=V=>{a.value=new Date(V),n("fetchProgramData",V)},h=V=>{const S=new Date(a.value);S.setDate(S.getDate()+V),w(S)},N=()=>{h(-1)},W=()=>{h(1)},Y=()=>{w(new Date)},g=V=>{w(V.date)},I=()=>{const V=jt(d.value);r.value=!1,w(V)},H=async V=>{if(l.value=V.key,await me(),!u.value)return;const S=zt(V.hour);u.value.scrollToTimePeriod(S)};return ve(async()=>{a.value=new Date,n("fetchProgramData",a.value),i.value=new Date,c=window.setInterval(()=>{i.value=new Date},6e4),await me(),setTimeout(()=>{u.value&&u.value.setInitialScrollPosition()},100)}),mt(()=>{c&&(clearInterval(c),c=null)}),(V,S)=>(D(),T("div",dn,[s(Ua,{title:V.title,"is-loading":V.isLoading,"total-programs":v.value,"current-date-label":$.value,onPreviousDay:N,onToday:Y,onNextDay:W},null,8,["title","is-loading","total-programs","current-date-label"]),k("div",cn,[s(Bt,{"week-tabs":_(f),"is-outside-week-range":_(y),"calendar-tab-content":_(R),onTabClick:g,onShowCalendar:S[0]||(S[0]=E=>r.value=!0)},null,8,["week-tabs","is-outside-week-range","calendar-tab-content"]),s(Qa,{"time-periods":_(m),"selected-time-period":l.value,onScrollToPeriod:H},null,8,["time-periods","selected-time-period"])]),k("div",un,[V.isLoading?O("",!0):(D(),vt(Aa,{key:0,ref_key:"gridRef",ref:u,programs:P.value,channels:b.value,"display-date":a.value,"current-time":i.value,onProgramClick:M},null,8,["programs","channels","display-date","current-time"])),V.isLoading?(D(),T("div",mn,[s(ft,{indeterminate:"",color:"primary",size:"48"}),S[4]||(S[4]=k("p",{class:"mt-4"},"番組表を読み込んでいます...",-1))])):O("",!0)]),s(pt,{modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=E=>r.value=E),"max-width":"400px"},{default:U(()=>[s(Dt,null,{default:U(()=>[s(Tt,null,{default:U(()=>S[5]||(S[5]=[q("日付を選択",-1)])),_:1,__:[5]}),s($t,null,{default:U(()=>[s(sn,{modelValue:d.value,"onUpdate:modelValue":S[1]||(S[1]=E=>d.value=E),max:new Date().toISOString().substring(0,10),"show-adjacent-months":""},null,8,["modelValue","max"])]),_:1}),s(Pt,null,{default:U(()=>[s(He),s(L,{variant:"text",onClick:S[2]||(S[2]=E=>r.value=!1)},{default:U(()=>S[6]||(S[6]=[q("キャンセル",-1)])),_:1,__:[6]}),s(L,{color:"primary",onClick:I},{default:U(()=>S[7]||(S[7]=[q("選択",-1)])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),fn=oe(vn,[["__scopeId","data-v-be0ed211"]]),_n={class:"route-container"},kn={class:"recorded-timetable-container-wrapper"},hn={class:"recorded-timetable-container"},gn=ne({__name:"ForkRecordedTimetableView",setup(e){const t=kt(),o=A(!0),n=A([]),a=A([]),r=l=>{t.push(`/videos/watch/${l.id}`)},d=async l=>{o.value=!0;const i=l.getFullYear(),u=String(l.getMonth()+1).padStart(2,"0"),c=String(l.getDate()).padStart(2,"0"),f=`${i}-${u}-${c}`;try{const y=await Ct.fetchVideoTimetable(f);if(y){n.value=y.recorded_programs.map(m=>{var b;return{id:m.id,title:m.title,subtitle:m.subtitle||void 0,description:m.description||void 0,start_time:m.start_time,duration:m.duration,channel_id:((b=m.channel)==null?void 0:b.id)||"",genres:m.genres,detail:m.detail,recorded_video:m.recorded_video?{file_size:m.recorded_video.file_size,duration:m.recorded_video.duration,video_resolution_width:m.recorded_video.video_resolution_width,video_resolution_height:m.recorded_video.video_resolution_height,video_codec:m.recorded_video.video_codec}:void 0}});const R=new Map;y.recorded_programs.forEach(m=>{m.channel&&!R.has(m.channel.id)&&R.set(m.channel.id,m.channel)}),a.value=Array.from(R.values()).sort((m,b)=>m.channel_number.localeCompare(b.channel_number)).map(m=>({id:m.id,name:m.name}))}else n.value=[],a.value=[]}catch(y){console.error("番組データの取得に失敗しました:",y),n.value=[],a.value=[]}finally{o.value=!1}};return ve(async()=>{await _t().fetchUser(),o.value=!1}),(l,i)=>(D(),T("div",_n,[s(gt),k("main",null,[s(bt),k("div",kn,[s(yt),k("div",hn,[s(ht,{crumbs:[{name:"ホーム",path:"/"},{name:"ビデオをみる",path:"/videos/"},{name:"録画番組番組表（Fork版）",path:"/fork/videos/timetable",disabled:!0}]}),s(fn,{title:"録画番組番組表（Fork版）",programs:n.value,channels:a.value,isLoading:o.value,onFetchProgramData:d,onProgramClick:r},null,8,["programs","channels","isLoading"])])])])]))}}),Mn=oe(gn,[["__scopeId","data-v-3b6fa0cc"]]);export{Mn as default};
