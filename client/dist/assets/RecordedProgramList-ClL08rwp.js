import{d as C,q as u,s as m,c as s,n as h,e as i,b as l,w as b,a as n,r as H,t as k,F as v,l as L,k as _,h as P,V as R,g as T,B as $,U as I,C as O,o as r,R as U,_ as D}from"./index-B0Vsap8Y.js";import{F as E,R as F}from"./RecordedProgram-yCTNDIO6.js";import{V as N}from"./VSelect-CkBZkUse.js";import{V as W}from"./VPagination-vwICyaFo.js";const q={key:0,class:"recorded-program-list__header"},z={class:"recorded-program-list__title"},j={class:"recorded-program-list__title-text"},A={key:1,class:"recorded-program-list__title-count"},G={key:1},J={class:"recorded-program-list__empty-content"},K=["innerHTML"],Q=["innerHTML"],X={class:"recorded-program-list__grid-content"},Y={key:2,class:"recorded-program-list__pagination"},Z=C({__name:"RecordedProgramList",props:{title:{},programs:{},total:{},page:{default:1},sortOrder:{default:"desc"},hideHeader:{type:Boolean,default:!1},hideSort:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyIcon:{default:"fluent:warning-20-regular"},emptyMessage:{default:"録画番組が見つかりませんでした。"},emptySubMessage:{default:'サーバー設定で録画フォルダのパスを<br class="d-sm-none">正しく設定できているか確認してください。'},isLoading:{type:Boolean,default:!1},isSearching:{type:Boolean,default:!1},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1},showCustomChoice:{type:Boolean},customSearch:{default:()=>({})}},emits:["update:page","update:sortOrder","update:customSearch","more"],setup(B,{emit:S}){O();const a=B,w=S,y=u(a.page),f=u(a.sortOrder),p=u({...a.customSearch}),c=u([...a.programs]),d=u(a.total);m(()=>a.page,e=>{y.value=e}),m(()=>a.sortOrder,e=>{f.value=e}),m(()=>a.programs,e=>{c.value=[...e]}),m(()=>a.total,e=>{d.value=e}),m(()=>a.customSearch,e=>{p.value={...e}},{deep:!0});const M=e=>{c.value=c.value.filter(t=>t.id!==e),d.value--},V=e=>{w("update:customSearch",p.value)};return(e,t)=>{const g=H("Icon");return r(),s("div",{class:h(["recorded-program-list",{"recorded-program-list--show-sort":!e.hideSort}])},[e.hideHeader?i("",!0):(r(),s("div",q,[l("h2",z,[e.showBackButton?b((r(),s("div",{key:0,class:"recorded-program-list__title-back",onClick:t[0]||(t[0]=o=>e.$router.back())},[n(g,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[U]]):i("",!0),l("span",j,k(e.title),1),e.showMoreButton?i("",!0):(r(),s("div",A,[e.isSearching?(r(),s(v,{key:0},[n(g,{icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"}),t[7]||(t[7]=l("span",null,"検索中...",-1))],64)):(r(),s(v,{key:1},[L(k(d.value)+"件",1)],64))]))]),l("div",{class:h(["recorded-program-list__actions",{"recorded-program-list__actions--mylist":e.forMylist}])},[e.hideSort?i("",!0):(r(),_(N,{key:0,modelValue:f.value,"onUpdate:modelValue":[t[1]||(t[1]=o=>f.value=o),t[2]||(t[2]=o=>e.$emit("update:sortOrder",o))],items:e.forMylist?[{title:"追加が新しい順",value:"mylist_added_desc"},{title:"追加が古い順",value:"mylist_added_asc"},{title:"録画が新しい順",value:"recorded_desc"},{title:"録画が古い順",value:"recorded_asc"}]:[{title:"新しい順",value:"desc"},{title:"古い順",value:"asc"}],"item-title":"title","item-value":"value",class:"recorded-program-list__sort",color:"primary","bg-color":"background-lighten-1",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue","items"])),e.showMoreButton?(r(),_(R,{key:1,variant:"text",class:"recorded-program-list__more",onClick:t[3]||(t[3]=o=>e.$emit("more"))},{default:P(()=>[t[8]||(t[8]=l("span",{class:"text-primary"},"もっと見る",-1)),n(g,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1,__:[8]})):i("",!0)],2)])),e.showCustomChoice?(r(),s("div",G,[n(E,{customSearch:p.value,"onUpdate:customSearch":t[4]||(t[4]=o=>p.value=o),onChange:V},null,8,["customSearch"])])):i("",!0),l("div",{class:h(["recorded-program-list__grid",{"recorded-program-list__grid--loading":e.isLoading||e.isSearching,"recorded-program-list__grid--empty":d.value===0&&e.showEmptyMessage,"recorded-program-list__grid--searching":e.isSearching}])},[l("div",{class:h(["recorded-program-list__empty",{"recorded-program-list__empty--show":d.value===0&&e.showEmptyMessage&&!e.isSearching}])},[l("div",J,[n(g,{class:"recorded-program-list__empty-icon",icon:e.emptyIcon,width:"54px",height:"54px"},null,8,["icon"]),l("h2",{innerHTML:e.emptyMessage},null,8,K),e.emptySubMessage?(r(),s("div",{key:0,class:"recorded-program-list__empty-submessage",innerHTML:e.emptySubMessage},null,8,Q)):i("",!0)])],2),l("div",X,[(r(!0),s(v,null,T(c.value,o=>(r(),_(F,{key:o.id,program:o,forMylist:e.forMylist,forWatchedHistory:e.forWatchedHistory,onDeleted:M},null,8,["program","forMylist","forWatchedHistory"]))),128))])],2),!e.hidePagination&&d.value>0?(r(),s("div",Y,[n(W,{modelValue:y.value,"onUpdate:modelValue":[t[5]||(t[5]=o=>y.value=o),t[6]||(t[6]=o=>e.$emit("update:page",o))],"active-color":"primary",density:"comfortable",length:Math.ceil(d.value/30),"total-visible":$(I).isSmartphoneVertical()?5:7},null,8,["modelValue","length","total-visible"])])):i("",!0)],2)}}}),re=D(Z,[["__scopeId","data-v-cc28e4ca"]]);export{re as R};
