import{d as ne,c as D,b as v,F as U,g as X,n as he,a as d,t as S,B as f,I as ie,o as p,_ as re,D as ve,E as P,q as B,G as be,x as fe,e as N,f as oe,V as Y,h as j,l as Q,H as K,J as q,K as te,L as ce,N as ye,O as _e,Q as Ke,S as se,T as Z,W as ue,X as Qe,Y as me,s as He,Z as le,$ as Ee,a0 as Ne,a1 as J,a2 as Be,a3 as Ze,a4 as et,a5 as tt,a6 as at,a7 as ot,a8 as nt,a9 as rt,aa as it,ab as lt,ac as st,ad as dt,ae as ct,af as ut,ag as mt,ah as vt,ai as ft,aj as _t,ak as kt,z as ht,k as gt,al as bt,A as yt,y as pt,C as Dt}from"./index-BF1wtGUm.js";import{B as Tt}from"./Breadcrumbs-CCO2WwnH.js";import{H as $t,N as Pt}from"./Navigation-FwREv-Rv.js";import{S as wt}from"./SPHeaderBar-HTze3Hzc.js";import{V as St}from"./VDialog-DxQqDTzu.js";import{V as Ct,a as Vt,b as Mt,c as xt}from"./VCard-DgcsCcF8.js";import{V as Le,c as It}from"./ssrBoot-Cvg94IZz.js";import{M as Fe}from"./VAvatar-Bhorhnx2.js";import{V as Rt}from"./index-BFgBUmGv.js";import{F as Ot}from"./ForkVideos-C9pD1ikQ.js";import"./dialog-transition-BajC6ypD.js";const At={class:"fork-recorded-timetable__date-section"},Ht={class:"fork-recorded-timetable__tab-container"},Et=["onClick"],Nt={class:"fork-recorded-timetable__tab-day"},Bt={class:"fork-recorded-timetable__tab-date"},Lt={class:"fork-recorded-timetable__tab-calendar-content"},Ft={class:"fork-recorded-timetable__tab-calendar-text"},Wt={class:"fork-recorded-timetable__tab-day"},Yt={class:"fork-recorded-timetable__tab-date"},Gt=ne({__name:"ForkRecordedTimetableDateTabs",props:{weekTabs:{},isOutsideWeekRange:{type:Boolean},calendarTabContent:{}},emits:["tabClick","showCalendar"],setup(e){return(t,n)=>(p(),D("div",At,[v("div",Ht,[(p(!0),D(U,null,X(t.weekTabs,o=>(p(),D("div",{key:o.date.toDateString(),class:he(["fork-recorded-timetable__tab",{"fork-recorded-timetable__tab--selected":o.isSelected,"fork-recorded-timetable__tab--today":o.isToday}]),onClick:a=>t.$emit("tabClick",o)},[v("div",Nt,S(o.dayOfWeek),1),v("div",Bt,S(o.label),1)],10,Et))),128)),v("div",{class:he(["fork-recorded-timetable__tab fork-recorded-timetable__tab--calendar",{"fork-recorded-timetable__tab--selected":t.isOutsideWeekRange}]),onClick:n[0]||(n[0]=o=>t.$emit("showCalendar"))},[v("div",Lt,[v("div",Ft,[v("div",Wt,S(t.calendarTabContent.day),1),v("div",Yt,S(t.calendarTabContent.date),1)]),d(f(ie),{icon:"fluent:calendar-ltr-20-regular",class:"fork-recorded-timetable__tab-calendar-icon"})])],2)])]))}}),Ut=re(Gt,[["__scopeId","data-v-1ee51310"]]),ee=3.5,We=ee*60,ke=4,we=24,jt=25,zt=We,ge=60,Jt=60,qt=(e,t)=>({setInitialScrollPosition:async()=>{if(await ve(),!e.value)return;const a=new Date,i=new Date(t.value);i.setHours(ke,0,0,0);const l=Math.floor((a.getTime()-i.getTime())/(1e3*60));if(l>=0&&l<=1440){const u=l*ee,s=(e.value.clientHeight-ge)/2,r=Math.max(0,u-s);e.value.scrollTop=r}else{const u=120*ee,s=(e.value.clientHeight-ge)/2,r=Math.max(0,u-s);e.value.scrollTop=r}},scrollToTimePeriod:a=>{if(!e.value)return;const i=a*We;e.value.scrollTo({top:i,behavior:"smooth"})}}),Xt=e=>{const t=P(()=>{const o=[],a=new Date(e.value);a.setHours(ke,0,0,0);for(let i=0;i<we;i++){const l=new Date(a.getTime()+i*60*60*1e3),u=l.toLocaleDateString("ja-JP",{month:"numeric",day:"numeric"}),c=l.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});o.push({label:`${u} ${c}`,date:u,time:c})}return o}),n=P(()=>we*60*ee);return{timeHours:t,timetableHeight:n}},Kt=e=>{const t=B(!1),n=B(null),o=B({});let a=null,i=null;return{tooltipVisible:t,tooltipProgram:n,tooltipStyle:o,showTooltip:(r,k)=>{var H;a!==null&&(clearTimeout(a),a=null),i!==null&&(clearTimeout(i),i=null);const R=k.currentTarget.getBoundingClientRect();if(!((H=e.value)==null?void 0:H.getBoundingClientRect()))return;const T=window.innerWidth/2,m=R.left<T,y=350,_=8;let V,x;m?V=R.right+_:V=R.left-y-_,x=R.top,V+y>window.innerWidth&&(V=window.innerWidth-y-16),V<16&&(V=16),x+200>window.innerHeight&&(x=window.innerHeight-200-16),x<16&&(x=16),i=window.setTimeout(()=>{n.value=r,t.value=!0,o.value={left:`${V}px`,top:`${x}px`}},300)},hideTooltip:()=>{i!==null&&(clearTimeout(i),i=null),a=window.setTimeout(()=>{t.value=!1,n.value=null},200)},onTooltipMouseEnter:()=>{a!==null&&(clearTimeout(a),a=null)},onTooltipMouseLeave:()=>{t.value=!1,n.value=null}}},Ye=e=>{const t=e.getMonth()+1,n=e.getDate();return`${t}/${n}`},Se=e=>e.toLocaleDateString("ja-JP",{year:"numeric",month:"numeric",day:"numeric"}),Ce=e=>e.toLocaleDateString("ja-JP",{weekday:"short"}),Qt=e=>{if(e instanceof Date){const t=e.getFullYear(),n=e.getMonth(),o=e.getDate();return new Date(t,n,o)}else if(typeof e=="string"){const[t,n,o]=e.split("-").map(Number);return new Date(t,n-1,o)}else return new Date},Zt=e=>e>=4?e-4:20+e,ea=e=>new Date(e).getMinutes().toString().padStart(2,"0"),ta=(e,t)=>{if(!e||!t)return"";const n=new Date(e),o=new Date(n.getTime()+t*1e3),a=i=>i.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${a(n)} ã€œ ${a(o)}`},aa=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},oa=e=>e>=1024*1024*1024?`${(e/(1024*1024*1024)).toFixed(2)} GB`:e>=1024*1024?`${(e/(1024*1024)).toFixed(2)} MB`:`${(e/1024).toFixed(2)} KB`;function na(e,t){if(!e||!t||t===0)return 0;const n=t/60;return Math.round(e/n*10)/10}function ra(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}const ia={"ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ»å ±é“":{r:59,g:130,b:246},ã‚¹ãƒãƒ¼ãƒ„:{r:34,g:197,b:94},"æƒ…å ±ãƒ»ãƒ¯ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼":{r:249,g:115,b:22},ãƒ‰ãƒ©ãƒ:{r:236,g:72,b:153},éŸ³æ¥½:{r:168,g:85,b:247},ãƒãƒ©ã‚¨ãƒ†ã‚£:{r:234,g:179,b:8},æ˜ ç”»:{r:239,g:68,b:68},"ã‚¢ãƒ‹ãƒ¡ãƒ»ç‰¹æ’®":{r:6,g:182,b:212},"ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ã‚¿ãƒªãƒ¼ãƒ»æ•™é¤Š":{r:161,g:98,b:7},"åŠ‡å ´ãƒ»å…¬æ¼”":{r:147,g:51,b:234},"è¶£å‘³ãƒ»æ•™è‚²":{r:20,g:184,b:166},ç¦ç¥‰:{r:132,g:204,b:22},ãã®ä»–:{r:107,g:114,b:128}},W={NORMAL:.08,SINGLE:.12,HOVER:.14,SINGLE_HOVER:.18,STRIPE:1},pe=(e,t=3)=>!e||e.length===0?[]:e.slice(0,t).map(n=>ia[n.major]).filter(n=>n!==void 0),la=e=>{const t=pe(e);if(t.length===0)return null;const n=t.map(o=>`rgba(${o.r}, ${o.g}, ${o.b}, ${W.STRIPE})`);return n.length===1?n[0]:n.length===2?`linear-gradient(to bottom, ${n[0]} 0%, ${n[0]} 50%, ${n[1]} 50%, ${n[1]} 100%)`:`linear-gradient(to bottom, ${n[0]} 0%, ${n[0]} 33.33%, ${n[1]} 33.33%, ${n[1]} 66.66%, ${n[2]} 66.66%, ${n[2]} 100%)`},sa=e=>{const t=pe(e),n="rgb(var(--v-theme-surface))";if(t.length===0)return n;if(t.length===1){const o=t[0];return`linear-gradient(rgba(${o.r}, ${o.g}, ${o.b}, ${W.SINGLE}), rgba(${o.r}, ${o.g}, ${o.b}, ${W.SINGLE})), ${n}`}else if(t.length===2){const o=t[0],a=t[1];return`linear-gradient(135deg, rgba(${o.r}, ${o.g}, ${o.b}, ${W.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${W.NORMAL}) 100%), ${n}`}else{const o=t[0],a=t[1];return`linear-gradient(135deg, rgba(${o.r}, ${o.g}, ${o.b}, ${W.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${W.NORMAL}) 100%), ${n}`}},da=e=>{const t=pe(e),n="rgb(var(--v-theme-surface))";if(t.length===0)return"rgb(var(--v-theme-primary-lighten-4))";if(t.length===1){const o=t[0];return`linear-gradient(rgba(${o.r}, ${o.g}, ${o.b}, ${W.SINGLE_HOVER}), rgba(${o.r}, ${o.g}, ${o.b}, ${W.SINGLE_HOVER})), ${n}`}else if(t.length===2){const o=t[0],a=t[1];return`linear-gradient(135deg, rgba(${o.r}, ${o.g}, ${o.b}, ${W.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${W.HOVER}) 100%), ${n}`}else{const o=t[0],a=t[1];return`linear-gradient(135deg, rgba(${o.r}, ${o.g}, ${o.b}, ${W.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${W.HOVER}) 100%), ${n}`}},ca=(e,t,n)=>{const o=new Date(e.start_time),a=new Date(n);a.setHours(ke,0,0,0);const i=Math.floor((o.getTime()-a.getTime())/(1e3*60)),l=e.duration/60,u=i*ee,c=Math.max(l*ee,jt),s=sa(e.genres),r=la(e.genres),k=da(e.genres),$={position:"absolute",top:`${u}px`,height:`${c}px`,width:"100%",left:"0",zIndex:String(t)};return s&&($.background=s),r&&($["--genre-stripe"]=r),k&&($["--genre-bg-hover"]=k),$},ua=(e,t)=>{const n=new Date(t);n.setHours(ke,0,0,0);const o=Math.floor((e.getTime()-n.getTime())/(1e3*60));return o<0||o>24*60?null:o*ee},ma={class:"fork-recorded-timetable__grid"},va={class:"fork-recorded-timetable__time-column"},fa={class:"fork-recorded-timetable__time-date"},_a={class:"fork-recorded-timetable__time-hour"},ka=["onClick","onMouseenter"],ha={class:"fork-recorded-timetable__program-content"},ga={class:"fork-recorded-timetable__program-left"},ba={class:"fork-recorded-timetable__program-minutes"},ya={key:0,class:"fork-recorded-timetable__program-comments"},pa={class:"fork-recorded-timetable__program-comments-value"},Da={class:"fork-recorded-timetable__program-info"},Ta={class:"fork-recorded-timetable__program-title"},$a={key:0,class:"fork-recorded-timetable__program-subtitle"},Pa={key:1,class:"fork-recorded-timetable__program-description"},wa={class:"fork-recorded-timetable__tooltip-time"},Sa={key:0,class:"fork-recorded-timetable__tooltip-comment-compact"},Ca={class:"fork-recorded-timetable__tooltip-comment-badge"},Va={class:"fork-recorded-timetable__tooltip-comment-total"},Ma={class:"fork-recorded-timetable__tooltip-comment-rate"},xa={class:"fork-recorded-timetable__tooltip-comment-rate-value"},Ia={class:"fork-recorded-timetable__tooltip-title"},Ra={key:1,class:"fork-recorded-timetable__tooltip-subtitle"},Oa={key:2,class:"fork-recorded-timetable__tooltip-description"},Aa={key:3,class:"fork-recorded-timetable__tooltip-genres"},Ha={class:"fork-recorded-timetable__tooltip-genre-list"},Ea={key:4,class:"fork-recorded-timetable__tooltip-video-info"},Na={class:"fork-recorded-timetable__tooltip-info-grid"},Ba={key:0},La={class:"fork-recorded-timetable__tooltip-info-value"},Fa={key:1},Wa={class:"fork-recorded-timetable__tooltip-info-value"},Ya={key:2},Ga={class:"fork-recorded-timetable__tooltip-info-value"},Ua={key:3},ja={class:"fork-recorded-timetable__tooltip-info-value"},za={key:5,class:"fork-recorded-timetable__tooltip-detail"},Ja={key:0,class:"fork-recorded-timetable__tooltip-detail-section"},qa={class:"fork-recorded-timetable__tooltip-label"},Xa={class:"fork-recorded-timetable__tooltip-detail-content"},Ka=ne({__name:"ForkRecordedTimetableGrid",props:{programs:{},channels:{},displayDate:{},currentTime:{}},emits:["programClick"],setup(e,{expose:t}){const n=e,o=B(null),a=be(n,"displayDate"),{timeHours:i,timetableHeight:l}=Xt(a),{setInitialScrollPosition:u,scrollToTimePeriod:c}=qt(o,a),{tooltipVisible:s,tooltipProgram:r,tooltipStyle:k,showTooltip:$,hideTooltip:R,onTooltipMouseEnter:g,onTooltipMouseLeave:T}=Kt(o),m=P(()=>{const I=n.channels.length;return`${Jt}px repeat(${I}, minmax(150px, 200px))`}),y=I=>n.programs.filter(h=>h.channel_id===I).sort((h,L)=>new Date(h.start_time).getTime()-new Date(L.start_time).getTime()),_=(I,h)=>ca(I,h,n.displayDate),V=()=>{const I=ua(n.currentTime,n.displayDate);return I===null?{display:"none"}:{position:"absolute",top:`${I}px`,left:"0",right:"0",height:"2px",background:"#ff4444",zIndex:20,gridColumn:"1 / -1",gridRow:2,pointerEvents:"none"}},x=I=>{var b,M,E;const h=(M=(b=I.recorded_video)==null?void 0:b.fork_recorded_video)==null?void 0:M.comment_count,L=(E=I.recorded_video)==null?void 0:E.duration;return!h||!L?0:na(h,L)},H=I=>ra(I);return t({scrollToTimePeriod:c,setInitialScrollPosition:u}),fe(()=>{u()}),(I,h)=>{var L,b,M,E,C,w,F,z,O,De,Te,$e,Pe;return p(),D("div",ma,[v("div",{class:"fork-recorded-timetable__body",ref_key:"scrollContainer",ref:o},[v("div",{class:"fork-recorded-timetable__grid-container",style:oe({gridTemplateColumns:m.value,height:`${f(l)+f(ge)}px`})},[h[5]||(h[5]=v("div",{class:"fork-recorded-timetable__time-column-header"},"æ™‚é–“",-1)),(p(!0),D(U,null,X(I.channels,A=>(p(),D("div",{key:A.id,class:"fork-recorded-timetable__channel-header"},S(A.name),1))),128)),v("div",va,[(p(!0),D(U,null,X(f(i),A=>(p(),D("div",{key:A.label,class:"fork-recorded-timetable__time-label",style:oe({height:`${f(zt)}px`})},[v("div",fa,S(A.date),1),v("div",_a,S(A.time),1)],4))),128))]),(p(!0),D(U,null,X(I.channels,(A,ae)=>(p(),D("div",{key:A.id,class:"fork-recorded-timetable__channel-column",style:oe({gridColumn:ae+2,gridRowStart:2})},[(p(!0),D(U,null,X(y(A.id),(G,Xe)=>(p(),D("div",{key:G.id,class:"fork-recorded-timetable__program-item",style:oe(_(G,Xe)),onClick:de=>I.$emit("programClick",G),onMouseenter:de=>f($)(G,de),onMouseleave:h[0]||(h[0]=(...de)=>f(R)&&f(R)(...de))},[v("div",ha,[v("div",ga,[v("div",ba,S(f(ea)(G.start_time)),1),x(G)>0?(p(),D("div",ya,[h[3]||(h[3]=v("div",{class:"fork-recorded-timetable__program-comments-icon"},"âš¡",-1)),v("div",pa,S(x(G)),1),h[4]||(h[4]=v("div",{class:"fork-recorded-timetable__program-comments-unit"},"/åˆ†",-1))])):N("",!0)]),v("div",Da,[v("div",Ta,S(G.title),1),G.subtitle?(p(),D("div",$a,S(G.subtitle),1)):N("",!0),G.description?(p(),D("div",Pa,S(G.description),1)):N("",!0)])])],44,ka))),128))],4))),128)),v("div",{class:"fork-recorded-timetable__current-time-line",style:oe(V())},null,4)],4)],512),f(s)?(p(),D("div",{key:0,class:"fork-recorded-timetable__tooltip",style:oe(f(k)),onMouseenter:h[1]||(h[1]=(...A)=>f(g)&&f(g)(...A)),onMouseleave:h[2]||(h[2]=(...A)=>f(T)&&f(T)(...A))},[v("div",wa,S(f(ta)((L=f(r))==null?void 0:L.start_time,(b=f(r))==null?void 0:b.duration)),1),(C=(E=(M=f(r))==null?void 0:M.recorded_video)==null?void 0:E.fork_recorded_video)!=null&&C.comment_count?(p(),D("div",Sa,[v("div",Ca,[h[6]||(h[6]=v("span",{class:"fork-recorded-timetable__tooltip-comment-icon"},"ğŸ’¬",-1)),v("span",Va,S(H(f(r).recorded_video.fork_recorded_video.comment_count))+"ä»¶ ",1)]),v("div",Ma,[h[7]||(h[7]=v("span",{class:"fork-recorded-timetable__tooltip-comment-rate-icon"},"âš¡",-1)),v("span",xa,S(x(f(r)))+"/åˆ† ",1)])])):N("",!0),v("div",Ia,S((w=f(r))==null?void 0:w.title),1),(F=f(r))!=null&&F.subtitle?(p(),D("div",Ra,S((z=f(r))==null?void 0:z.subtitle),1)):N("",!0),(O=f(r))!=null&&O.description?(p(),D("div",Oa,S((De=f(r))==null?void 0:De.description),1)):N("",!0),(Te=f(r))!=null&&Te.genres&&f(r).genres.length>0?(p(),D("div",Aa,[h[8]||(h[8]=v("div",{class:"fork-recorded-timetable__tooltip-label"},"ã‚¸ãƒ£ãƒ³ãƒ«",-1)),v("div",Ha,[(p(!0),D(U,null,X(f(r).genres,(A,ae)=>(p(),D("span",{key:ae,class:"fork-recorded-timetable__tooltip-genre-tag"},S(A.major)+S(A.middle?` / ${A.middle}`:""),1))),128))])])):N("",!0),($e=f(r))!=null&&$e.recorded_video?(p(),D("div",Ea,[h[13]||(h[13]=v("div",{class:"fork-recorded-timetable__tooltip-label"},"éŒ²ç”»æƒ…å ±",-1)),v("div",Na,[f(r).recorded_video.video_resolution_width&&f(r).recorded_video.video_resolution_height?(p(),D("div",Ba,[h[9]||(h[9]=v("span",{class:"fork-recorded-timetable__tooltip-info-key"},"è§£åƒåº¦:",-1)),v("span",La,S(f(r).recorded_video.video_resolution_width)+"Ã—"+S(f(r).recorded_video.video_resolution_height),1)])):N("",!0),f(r).recorded_video.video_codec?(p(),D("div",Fa,[h[10]||(h[10]=v("span",{class:"fork-recorded-timetable__tooltip-info-key"},"æ˜ åƒ:",-1)),v("span",Wa,S(f(r).recorded_video.video_codec),1)])):N("",!0),f(r).recorded_video.duration?(p(),D("div",Ya,[h[11]||(h[11]=v("span",{class:"fork-recorded-timetable__tooltip-info-key"},"å®ŸéŒ²ç”»æ™‚é–“:",-1)),v("span",Ga,S(f(aa)(f(r).recorded_video.duration)),1)])):N("",!0),f(r).recorded_video.file_size?(p(),D("div",Ua,[h[12]||(h[12]=v("span",{class:"fork-recorded-timetable__tooltip-info-key"},"ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º:",-1)),v("span",ja,S(f(oa)(f(r).recorded_video.file_size)),1)])):N("",!0)])])):N("",!0),(Pe=f(r))!=null&&Pe.detail?(p(),D("div",za,[(p(!0),D(U,null,X(f(r).detail,(A,ae)=>(p(),D(U,{key:ae},[A?(p(),D("div",Ja,[v("div",qa,S(ae),1),v("div",Xa,S(A),1)])):N("",!0)],64))),128))])):N("",!0)],36)):N("",!0)])}}}),Qa=re(Ka,[["__scopeId","data-v-d2736563"]]),Za={class:"fork-recorded-timetable__header"},eo={class:"fork-recorded-timetable__title"},to={class:"fork-recorded-timetable__title-text"},ao={key:0,class:"fork-recorded-timetable__title-loading"},oo={key:1,class:"fork-recorded-timetable__title-count"},no={class:"fork-recorded-timetable__controls"},ro={class:"fork-recorded-timetable__date-display ml-4"},io=ne({__name:"ForkRecordedTimetableHeader",props:{title:{},isLoading:{type:Boolean},totalPrograms:{},currentDateLabel:{}},emits:["previousDay","today","nextDay"],setup(e){return(t,n)=>(p(),D("div",Za,[v("div",eo,[v("span",to,S(t.title),1),t.isLoading?(p(),D("span",ao,[d(f(ie),{icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"}),n[3]||(n[3]=v("span",null,"èª­ã¿è¾¼ã¿ä¸­...",-1))])):N("",!0),t.isLoading?N("",!0):(p(),D("span",oo,S(t.totalPrograms)+"ä»¶ã®éŒ²ç”»ç•ªçµ„ ",1))]),v("div",no,[d(Y,{variant:"outlined",size:"small",onClick:n[0]||(n[0]=o=>t.$emit("previousDay")),class:"mr-2"},{default:j(()=>[d(f(ie),{icon:"fluent:chevron-left-20-regular",width:"18px"}),n[4]||(n[4]=Q(" å‰æ—¥ ",-1))]),_:1,__:[4]}),d(Y,{variant:"outlined",color:"primary",onClick:n[1]||(n[1]=o=>t.$emit("today")),class:"mr-2"},{default:j(()=>[d(f(ie),{icon:"fluent:calendar-ltr-20-regular",width:"18px",class:"mr-1"}),n[5]||(n[5]=Q(" ä»Šæ—¥ ",-1))]),_:1,__:[5]}),d(Y,{variant:"outlined",size:"small",onClick:n[2]||(n[2]=o=>t.$emit("nextDay"))},{default:j(()=>[n[6]||(n[6]=Q(" ç¿Œæ—¥ ",-1)),d(f(ie),{icon:"fluent:chevron-right-20-regular",width:"18px",class:"ml-1"})]),_:1,__:[6]}),v("div",ro,S(t.currentDateLabel),1)])]))}}),lo=re(io,[["__scopeId","data-v-ed3cc0c7"]]),so={class:"fork-recorded-timetable__time-section"},co={class:"fork-recorded-timetable__time-buttons"},uo=["onClick"],mo={class:"fork-recorded-timetable__time-button-label"},vo={class:"fork-recorded-timetable__time-button-time"},fo=ne({__name:"ForkRecordedTimetableTimePeriods",props:{timePeriods:{},selectedTimePeriod:{}},emits:["scrollToPeriod"],setup(e){return(t,n)=>(p(),D("div",so,[v("div",co,[(p(!0),D(U,null,X(t.timePeriods,o=>(p(),D("button",{key:o.key,class:he(["fork-recorded-timetable__time-button",{"fork-recorded-timetable__time-button--selected":t.selectedTimePeriod===o.key}]),onClick:a=>t.$emit("scrollToPeriod",o)},[v("span",mo,S(o.label),1),v("span",vo,S(o.startTime),1)],10,uo))),128))])]))}}),_o=re(fo,[["__scopeId","data-v-1a487513"]]),ko=(e,t,n)=>t?"ä»Šæ—¥":n===1?"æ˜¨æ—¥":Ye(e),ho=e=>{const t=P(()=>{const a=[],i=new Date;for(let l=0;l>=-6;l--){const u=new Date(i);u.setDate(i.getDate()+l);const c=l===0,s=u.toDateString()===e.value.toDateString();a.push({date:new Date(u),label:ko(u,c,Math.abs(l)),isToday:c,isSelected:s,dayOfWeek:Ce(u),daysAgo:Math.abs(l)})}return a}),n=P(()=>{const a=new Date,i=e.value.toDateString();for(let l=0;l>=-6;l--){const u=new Date(a);if(u.setDate(a.getDate()+l),u.toDateString()===i)return!1}return!0}),o=P(()=>n.value?{day:Ce(e.value),date:Ye(e.value)}:{day:"æ—¥ä»˜",date:"é¸æŠ"});return{weekTabs:t,isOutsideWeekRange:n,calendarTabContent:o}},go=[{key:"morning",label:"æœ",startTime:"04:00",hour:4},{key:"noon",label:"æ˜¼",startTime:"10:00",hour:10},{key:"evening",label:"å¤•",startTime:"16:00",hour:16},{key:"midnight",label:"æ·±å¤œ",startTime:"21:00",hour:21}],Ge=q({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:ce,default:"$next"},prevIcon:{type:ce,default:"$prev"},modeIcon:{type:ce,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Ve=K()({name:"VDatePickerControls",props:Ge(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const o=P(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=P(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),i=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){n("click:prev")}function c(){n("click:next")}function s(){n("click:year")}function r(){n("click:month")}return te(()=>d("div",{class:["v-date-picker-controls"]},[d(Y,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:o.value,text:e.text,variant:"text",rounded:!0,onClick:r},null),d(Y,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:s},null),d(Le,null,null),d("div",{class:"v-date-picker-controls__month"},[d(Y,{"data-testid":"prev-month",disabled:i.value,icon:e.prevIcon,variant:"text",onClick:u},null),d(Y,{"data-testid":"next-month",disabled:l.value,icon:e.nextIcon,variant:"text",onClick:c},null)])])),{}}}),bo=q({appendIcon:ce,color:String,header:String,transition:String,onClick:Ke()},"VDatePickerHeader"),Me=K()({name:"VDatePickerHeader",props:bo(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:o}=t;const{backgroundColorClasses:a,backgroundColorStyles:i}=ye(e,"color");function l(){n("click")}function u(){n("click:append")}return te(()=>{const c=!!(o.default||e.header),s=!!(o.append||e.appendIcon);return d("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:i.value,onClick:l},[o.prepend&&d("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),c&&d(Fe,{key:"content",name:e.transition},{default:()=>{var r;return[d("div",{key:e.header,class:"v-date-picker-header__content"},[((r=o.default)==null?void 0:r.call(o))??e.header])]}}),s&&d("div",{class:"v-date-picker-header__append"},[o.append?d(_e,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var r;return[(r=o.append)==null?void 0:r.call(o)]}}):d(Y,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),yo=q({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function po(e){const t=se(),n=Z(e,"modelValue",[],g=>ue(g).map(T=>t.date(T))),o=P(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=Z(e,"year",void 0,g=>{const T=g!=null?Number(g):t.getYear(o.value);return t.startOfYear(t.setYear(t.date(),T))},g=>t.getYear(g)),i=Z(e,"month",void 0,g=>{const T=g!=null?Number(g):t.getMonth(o.value),m=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(m,T)},g=>t.getMonth(g)),l=P(()=>e.firstDayOfWeek??e.weekdays[0]),u=P(()=>{const g=Number(e.firstDayOfWeek??0);return e.weekdays.map(T=>(T+g)%7)}),c=P(()=>{const g=t.getWeekArray(i.value,l.value),T=g.flat(),m=6*7;if(e.weeksInMonth==="static"&&T.length<m){const y=T[T.length-1];let _=[];for(let V=1;V<=m-T.length;V++)_.push(t.addDays(y,V)),V%7===0&&(g.push(_),_=[])}return g});function s(g,T){return g.filter(m=>u.value.includes(t.toJsDate(m).getDay())).map((m,y)=>{const _=t.toISO(m),V=!t.isSameMonth(m,i.value),x=t.isSameDay(m,t.startOfMonth(i.value)),H=t.isSameDay(m,t.endOfMonth(i.value)),I=t.isSameDay(m,i.value);return{date:m,isoDate:_,formatted:t.format(m,"keyboardDate"),year:t.getYear(m),month:t.getMonth(m),isDisabled:R(m),isWeekStart:y%7===0,isWeekEnd:y%7===6,isToday:t.isSameDay(m,T),isAdjacent:V,isHidden:V&&!e.showAdjacentMonths,isStart:x,isSelected:n.value.some(h=>t.isSameDay(m,h)),isEnd:H,isSame:I,localized:t.format(m,"dayOfMonth")}})}const r=P(()=>{const g=t.startOfWeek(o.value,e.firstDayOfWeek),T=[];for(let y=0;y<=6;y++)T.push(t.addDays(g,y));const m=t.date();return s(T,m)}),k=P(()=>{const g=c.value.flat(),T=t.date();return s(g,T)}),$=P(()=>c.value.map(g=>g.length?Qe(t,g[0]):null));function R(g){if(e.disabled)return!0;const T=t.date(g);return e.min&&t.isAfter(t.date(e.min),T)||e.max&&t.isAfter(T,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(m=>t.isSameDay(t.date(m),T)):typeof e.allowedDates=="function"?!e.allowedDates(T):!1}return{displayValue:o,daysInMonth:k,daysInWeek:r,genDays:s,model:n,weeksInMonth:c,weekDays:u,weekNumbers:$}}const Ue=q({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...le(yo(),["displayValue"])},"VDatePickerMonth"),xe=K()({name:"VDatePickerMonth",props:Ue(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const a=B(),{daysInMonth:i,model:l,weekNumbers:u}=po(e),c=se(),s=me(),r=me(),k=me(!1),$=P(()=>k.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(s.value=l.value[0],l.value.length>1&&(r.value=l.value[l.value.length-1]));const R=P(()=>{const y=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=y});He(i,(y,_)=>{_&&(k.value=c.isBefore(y[0].date,_[0].date))});function g(y){const _=c.startOfDay(y);if(l.value.length===0?s.value=void 0:l.value.length===1&&(s.value=l.value[0],r.value=void 0),!s.value)s.value=_,l.value=[s.value];else if(r.value)s.value=y,r.value=void 0,l.value=[s.value];else{if(c.isSameDay(_,s.value)){s.value=void 0,l.value=[];return}else c.isBefore(_,s.value)?(r.value=c.endOfDay(s.value),s.value=_):r.value=c.endOfDay(_);const V=c.getDiff(r.value,s.value,"days"),x=[s.value];for(let H=1;H<V;H++){const I=c.addDays(s.value,H);x.push(I)}x.push(r.value),l.value=x}}function T(y){const _=l.value.findIndex(V=>c.isSameDay(V,y));if(_===-1)l.value=[...l.value,y];else{const V=[...l.value];V.splice(_,1),l.value=V}}function m(y){e.multiple==="range"?g(y):e.multiple?T(y):l.value=[y]}return()=>d("div",{class:"v-date-picker-month"},[e.showWeek&&d("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&d("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Q("Â ")]),u.value.map(y=>d("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[y]))]),d(Fe,{name:$.value},{default:()=>{var y;return[d("div",{ref:a,key:(y=i.value[0].date)==null?void 0:y.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&c.getWeekdays(e.firstDayOfWeek).map(_=>d("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[_])),i.value.map((_,V)=>{const x={props:{onClick:()=>m(_.date)},item:_,i:V};return R.value&&!_.isSelected&&(_.isDisabled=!0),d("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":_.isAdjacent,"v-date-picker-month__day--hide-adjacent":_.isHidden,"v-date-picker-month__day--selected":_.isSelected,"v-date-picker-month__day--week-end":_.isWeekEnd,"v-date-picker-month__day--week-start":_.isWeekStart}],"data-v-date":_.isDisabled?void 0:_.isoDate},[(e.showAdjacentMonths||!_.isAdjacent)&&d(_e,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(_.isSelected||_.isToday)&&!_.isDisabled?e.color:void 0,disabled:_.isDisabled,icon:!0,ripple:!1,text:_.localized,variant:_.isDisabled?_.isToday?"outlined":"text":_.isToday&&!_.isSelected?"outlined":"flat",onClick:()=>m(_.date)}}},{default:()=>{var H;return[((H=o.day)==null?void 0:H.call(o,x))??d(Y,x.props,null)]}})])})])]}})])}}),je=q({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Ie=K()({name:"VDatePickerMonths",props:je(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const a=se(),i=Z(e,"modelValue"),l=P(()=>{let u=a.startOfYear(a.date());return e.year&&(u=a.setYear(u,e.year)),Ee(12).map(c=>{const s=a.format(u,"monthShort"),r=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),u)||e.max&&a.isAfter(u,a.startOfMonth(a.date(e.max))));return u=a.getNextMonth(u),{isDisabled:r,text:s,value:c}})});return Ne(()=>{i.value=i.value??a.getMonth(a.date())}),te(()=>d("div",{class:"v-date-picker-months",style:{height:Be(e.height)}},[d("div",{class:"v-date-picker-months__content"},[l.value.map((u,c)=>{var k;const s={active:i.value===c,color:i.value===c?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:i.value===u.value?"flat":"text",onClick:()=>r(c)};function r($){if(i.value===$){n("update:modelValue",i.value);return}i.value=$}return((k=o.month)==null?void 0:k.call(o,{month:u,i:c,props:s}))??d(Y,J({key:"month"},s),null)})])])),{}}}),ze=q({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Re=K()({name:"VDatePickerYears",props:ze(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const a=se(),i=Z(e,"modelValue"),l=P(()=>{const c=a.getYear(a.date());let s=c-100,r=c+52;e.min&&(s=a.getYear(a.date(e.min))),e.max&&(r=a.getYear(a.date(e.max)));let k=a.startOfYear(a.date());return k=a.setYear(k,s),Ee(r-s+1,s).map($=>{const R=a.format(k,"year");return k=a.setYear(k,a.getYear(k)+1),{text:R,value:$}})});Ne(()=>{i.value=i.value??a.getYear(a.date())});const u=Ze();return fe(async()=>{var c;await ve(),(c=u.el)==null||c.scrollIntoView({block:"center"})}),te(()=>d("div",{class:"v-date-picker-years",style:{height:Be(e.height)}},[d("div",{class:"v-date-picker-years__content"},[l.value.map((c,s)=>{var k;const r={ref:i.value===c.value?u:void 0,active:i.value===c.value,color:i.value===c.value?e.color:void 0,rounded:!0,text:c.text,variant:i.value===c.value?"flat":"text",onClick:()=>{if(i.value===c.value){n("update:modelValue",i.value);return}i.value=c.value}};return((k=o.year)==null?void 0:k.call(o,{year:c,i:s,props:r}))??d(Y,J({key:"month"},r),null)})])])),{}}}),Do=It("v-picker-title"),Je=q({color:String,..._t(),...ft(),...vt(),...mt(),...ut(),...ct(),...dt(),...st(),...lt()},"VSheet"),Oe=K()({name:"VSheet",props:Je(),setup(e,t){let{slots:n}=t;const{themeClasses:o}=et(e),{backgroundColorClasses:a,backgroundColorStyles:i}=ye(be(e,"color")),{borderClasses:l}=tt(e),{dimensionStyles:u}=at(e),{elevationClasses:c}=ot(e),{locationStyles:s}=nt(e),{positionClasses:r}=rt(e),{roundedClasses:k}=it(e);return te(()=>d(e.tag,{class:["v-sheet",o.value,a.value,l.value,c.value,r.value,k.value,e.class],style:[i.value,u.value,s.value,e.style]},n)),{}}}),qe=q({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Je()},"VPicker"),Ae=K()({name:"VPicker",props:qe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:o,backgroundColorStyles:a}=ye(be(e,"color"));return te(()=>{const i=Oe.filterProps(e),l=!!(e.title||n.title);return d(Oe,J(i,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&d("div",{key:"header",class:[o.value],style:[a.value]},[l&&d(Do,{key:"picker-title"},{default:()=>{var c;return[((c=n.title)==null?void 0:c.call(n))??e.title]}}),n.header&&d("div",{class:"v-picker__header"},[n.header()])]),d("div",{class:"v-picker__body"},[(u=n.default)==null?void 0:u.call(n)]),n.actions&&d(_e,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[d("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),To=q({header:{type:String,default:"$vuetify.datePicker.header"},...Ge(),...Ue({weeksInMonth:"static"}),...le(je(),["modelValue"]),...le(ze(),["modelValue"]),...qe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),$o=K()({name:"VDatePicker",props:To(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const a=se(),{t:i}=kt(),l=Z(e,"modelValue",void 0,b=>ue(b).map(M=>a.date(M)),b=>e.multiple?b:b[0]),u=Z(e,"viewMode"),c=P(()=>{const b=a.date(e.min);return e.min&&a.isValid(b)?b:null}),s=P(()=>{const b=a.date(e.max);return e.max&&a.isValid(b)?b:null}),r=P(()=>{var E;const b=a.date();let M=b;return(E=l.value)!=null&&E[0]?M=a.date(l.value[0]):c.value&&a.isBefore(b,c.value)?M=c.value:s.value&&a.isAfter(b,s.value)&&(M=s.value),M&&a.isValid(M)?M:b}),k=B(Number(e.month??a.getMonth(a.startOfMonth(r.value)))),$=B(Number(e.year??a.getYear(a.startOfYear(a.setMonth(r.value,k.value))))),R=me(!1),g=P(()=>e.multiple&&l.value.length>1?i("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&a.isValid(l.value[0])?a.format(a.date(l.value[0]),"normalDateWithWeekday"):i(e.header)),T=P(()=>{let b=a.date();return b=a.setDate(b,1),b=a.setMonth(b,k.value),b=a.setYear(b,$.value),a.format(b,"monthAndYear")}),m=P(()=>`date-picker-header${R.value?"-reverse":""}-transition`),y=P(()=>{if(e.disabled)return!0;const b=[];if(u.value!=="month")b.push("prev","next");else{let M=a.date();if(M=a.startOfMonth(M),M=a.setMonth(M,k.value),M=a.setYear(M,$.value),c.value){const E=a.addDays(a.startOfMonth(M),-1);a.isAfter(c.value,E)&&b.push("prev")}if(s.value){const E=a.addDays(a.endOfMonth(M),1);a.isAfter(E,s.value)&&b.push("next")}}return b});function _(){k.value<11?k.value++:($.value++,k.value=0,L($.value)),h(k.value)}function V(){k.value>0?k.value--:($.value--,k.value=11,L($.value)),h(k.value)}function x(){u.value="month"}function H(){u.value=u.value==="months"?"month":"months"}function I(){u.value=u.value==="year"?"month":"year"}function h(b){u.value==="months"&&H(),n("update:month",b)}function L(b){u.value==="year"&&I(),n("update:year",b)}return He(l,(b,M)=>{const E=ue(M),C=ue(b);if(!C.length)return;const w=a.date(E[E.length-1]),F=a.date(C[C.length-1]),z=a.getMonth(F),O=a.getYear(F);z!==k.value&&(k.value=z,h(k.value)),O!==$.value&&($.value=O,L($.value)),R.value=a.isBefore(w,F)}),te(()=>{const b=Ae.filterProps(e),M=Ve.filterProps(e),E=Me.filterProps(e),C=xe.filterProps(e),w=le(Ie.filterProps(e),["modelValue"]),F=le(Re.filterProps(e),["modelValue"]),z={header:g.value,transition:m.value};return d(Ae,J(b,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var O;return((O=o.title)==null?void 0:O.call(o))??d("div",{class:"v-date-picker__title"},[i(e.title)])},header:()=>o.header?d(_e,{defaults:{VDatePickerHeader:{...z}}},{default:()=>{var O;return[(O=o.header)==null?void 0:O.call(o,z)]}}):d(Me,J({key:"header"},E,z,{onClick:u.value!=="month"?x:void 0}),{...o,default:void 0}),default:()=>d(U,null,[d(Ve,J(M,{disabled:y.value,text:T.value,"onClick:next":_,"onClick:prev":V,"onClick:month":H,"onClick:year":I}),null),d(Rt,{hideOnLeave:!0},{default:()=>[u.value==="months"?d(Ie,J({key:"date-picker-months"},w,{modelValue:k.value,"onUpdate:modelValue":[O=>k.value=O,h],min:c.value,max:s.value,year:$.value}),null):u.value==="year"?d(Re,J({key:"date-picker-years"},F,{modelValue:$.value,"onUpdate:modelValue":[O=>$.value=O,L],min:c.value,max:s.value}),null):d(xe,J({key:"date-picker-month"},C,{modelValue:l.value,"onUpdate:modelValue":O=>l.value=O,month:k.value,"onUpdate:month":[O=>k.value=O,h],year:$.value,"onUpdate:year":[O=>$.value=O,L],min:c.value,max:s.value}),null)]})]),actions:o.actions})}),{}}}),Po={class:"fork-recorded-timetable"},wo={class:"fork-recorded-timetable__navigation"},So={class:"fork-recorded-timetable__content"},Co={key:1,class:"fork-recorded-timetable__loading"},Vo=ne({__name:"ForkRecordedTimetable",props:{title:{},programs:{default:()=>[]},channels:{default:()=>[]},isLoading:{type:Boolean,default:!1},initialDate:{}},emits:["programClick","fetchProgramData"],setup(e,{emit:t}){const n=e,o=t,a=B(new Date),i=B(!1),l=B(new Date().toISOString().substring(0,10)),u=B(""),c=B(new Date),s=B(null);let r=null;const{weekTabs:k,isOutsideWeekRange:$,calendarTabContent:R}=ho(a),g=go,T=P(()=>n.channels||[]),m=P(()=>n.programs||[]),y=P(()=>{const C=a.value,w=new Date(C);return w.setDate(C.getDate()+1),`${Se(C)} 4:00 ã€œ ${Se(w)} 4:00`}),_=P(()=>m.value.length),V=C=>{o("programClick",C)},x=C=>{a.value=new Date(C),o("fetchProgramData",C)},H=C=>{const w=new Date(a.value);w.setDate(w.getDate()+C),x(w)},I=()=>{H(-1)},h=()=>{H(1)},L=()=>{x(new Date)},b=C=>{x(C.date)},M=()=>{const C=Qt(l.value);i.value=!1,x(C)},E=async C=>{if(u.value=C.key,await ve(),!s.value)return;const w=Zt(C.hour);s.value.scrollToTimePeriod(w)};return fe(async()=>{a.value=n.initialDate||new Date,o("fetchProgramData",a.value),c.value=new Date,r=window.setInterval(()=>{c.value=new Date},6e4),await ve(),setTimeout(()=>{s.value&&s.value.setInitialScrollPosition()},100)}),ht(()=>{r&&(clearInterval(r),r=null)}),(C,w)=>(p(),D("div",Po,[d(lo,{title:C.title,"is-loading":C.isLoading,"total-programs":_.value,"current-date-label":y.value,onPreviousDay:I,onToday:L,onNextDay:h},null,8,["title","is-loading","total-programs","current-date-label"]),v("div",wo,[d(Ut,{"week-tabs":f(k),"is-outside-week-range":f($),"calendar-tab-content":f(R),onTabClick:b,onShowCalendar:w[0]||(w[0]=F=>i.value=!0)},null,8,["week-tabs","is-outside-week-range","calendar-tab-content"]),d(_o,{"time-periods":f(g),"selected-time-period":u.value,onScrollToPeriod:E},null,8,["time-periods","selected-time-period"])]),v("div",So,[C.isLoading?N("",!0):(p(),gt(Qa,{key:0,ref_key:"gridRef",ref:s,programs:m.value,channels:T.value,"display-date":a.value,"current-time":c.value,onProgramClick:V},null,8,["programs","channels","display-date","current-time"])),C.isLoading?(p(),D("div",Co,[d(bt,{indeterminate:"",color:"primary",size:"48"}),w[4]||(w[4]=v("p",{class:"mt-4"},"ç•ªçµ„è¡¨ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...",-1))])):N("",!0)]),d(St,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=F=>i.value=F),"max-width":"400px"},{default:j(()=>[d(Ct,null,{default:j(()=>[d(Vt,null,{default:j(()=>w[5]||(w[5]=[Q("æ—¥ä»˜ã‚’é¸æŠ",-1)])),_:1,__:[5]}),d(Mt,null,{default:j(()=>[d($o,{modelValue:l.value,"onUpdate:modelValue":w[1]||(w[1]=F=>l.value=F),max:new Date().toISOString().substring(0,10),"show-adjacent-months":""},null,8,["modelValue","max"])]),_:1}),d(xt,null,{default:j(()=>[d(Le),d(Y,{variant:"text",onClick:w[2]||(w[2]=F=>i.value=!1)},{default:j(()=>w[6]||(w[6]=[Q("ã‚­ãƒ£ãƒ³ã‚»ãƒ«",-1)])),_:1,__:[6]}),d(Y,{color:"primary",onClick:M},{default:j(()=>w[7]||(w[7]=[Q("é¸æŠ",-1)])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Mo=re(Vo,[["__scopeId","data-v-bbf55d78"]]),xo={class:"route-container"},Io={class:"recorded-timetable-container-wrapper"},Ro={class:"recorded-timetable-container"},Oo=ne({__name:"ForkRecordedTimetableView",setup(e){const t=Dt(),n=yt(),o=B(!0),a=P(()=>{const s=n.query.date;if(s){const r=new Date(s);if(!isNaN(r.getTime())&&r<=new Date)return r}}),i=B([]),l=B([]),u=s=>{const r=n.query.date;t.push({path:`/videos/watch/${s.id}`,query:{referrer:"fork-timetable",...r&&{timetable_date:r}}})},c=async s=>{o.value=!0;const r=s.getFullYear(),k=String(s.getMonth()+1).padStart(2,"0"),$=String(s.getDate()).padStart(2,"0"),R=`${r}-${k}-${$}`;t.replace({query:{date:R}});try{const g=await Ot.fetchVideoTimetable(R);if(console.log(g),g){i.value=g.recorded_programs.map(m=>{var y;return{id:m.id,title:m.title,subtitle:m.subtitle||void 0,description:m.description||void 0,start_time:m.start_time,duration:m.duration,channel_id:((y=m.channel)==null?void 0:y.id)||"",genres:m.genres,detail:m.detail,recorded_video:m.recorded_video?{file_size:m.recorded_video.file_size,duration:m.recorded_video.duration,video_resolution_width:m.recorded_video.video_resolution_width,video_resolution_height:m.recorded_video.video_resolution_height,video_codec:m.recorded_video.video_codec,fork_recorded_video:m.recorded_video.fork_recorded_video}:void 0}});const T=new Map;g.recorded_programs.forEach(m=>{m.channel&&!T.has(m.channel.id)&&T.set(m.channel.id,m.channel)}),l.value=Array.from(T.values()).sort((m,y)=>m.channel_number.localeCompare(y.channel_number)).map(m=>({id:m.id,name:m.name}))}else i.value=[],l.value=[]}catch(g){console.error("ç•ªçµ„ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:",g),i.value=[],l.value=[]}finally{o.value=!1}};return fe(async()=>{await pt().fetchUser(),o.value=!1}),(s,r)=>(p(),D("div",xo,[d($t),v("main",null,[d(Pt),v("div",Io,[d(wt),v("div",Ro,[d(Tt,{crumbs:[{name:"ãƒ›ãƒ¼ãƒ ",path:"/"},{name:"ãƒ“ãƒ‡ã‚ªã‚’ã¿ã‚‹",path:"/videos/"},{name:"éŒ²ç”»ç•ªçµ„ç•ªçµ„è¡¨ï¼ˆForkç‰ˆï¼‰",path:"/fork/videos/timetable",disabled:!0}]}),d(Mo,{title:"éŒ²ç”»ç•ªçµ„ç•ªçµ„è¡¨ï¼ˆForkç‰ˆï¼‰",programs:i.value,channels:l.value,isLoading:o.value,initialDate:a.value,onFetchProgramData:c,onProgramClick:u},null,8,["programs","channels","isLoading","initialDate"])])])])]))}}),jo=re(Oo,[["__scopeId","data-v-c19ad964"]]);export{jo as default};
