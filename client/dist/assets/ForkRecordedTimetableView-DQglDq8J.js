import{d as ne,c as $,b as k,F as G,g as q,n as ke,a as d,t as x,B as _,I as re,o as T,_ as oe,D as me,E as S,q as H,G as ge,x as ve,e as O,f as ae,V as L,h as U,l as K,H as X,J,K as ee,L as de,N as be,O as fe,Q as je,S as le,T as Q,W as ce,X as ze,Y as ue,s as xe,Z as ie,$ as Ie,a0 as Re,a1 as z,a2 as Oe,a3 as Je,a4 as qe,a5 as Xe,a6 as Ke,a7 as Qe,a8 as Ze,a9 as et,aa as tt,ab as at,ac as nt,ad as ot,ae as rt,af as it,ag as lt,ah as st,ai as dt,aj as ct,ak as ut,z as mt,k as vt,al as ft,A as _t,y as kt,C as ht}from"./index-B0Vsap8Y.js";import{B as gt}from"./Breadcrumbs-BBltJVlP.js";import{H as bt,N as yt}from"./Navigation-D9FlzpIL.js";import{S as pt}from"./SPHeaderBar-BBSsd_U9.js";import{V as Dt}from"./VDialog-B_qQjNav.js";import{V as Tt,a as $t,b as Pt,c as wt}from"./VCard-DJ3_bxc9.js";import{V as Ae,c as St}from"./ssrBoot-Cwn72r8K.js";import{M as He}from"./VAvatar-DJWNqtBk.js";import{V as Ct}from"./index-CRtBIdSj.js";import{F as Vt}from"./ForkVideos-DHv65gxK.js";import"./dialog-transition-0YKLs4AZ.js";const Mt={class:"fork-recorded-timetable__date-section"},xt={class:"fork-recorded-timetable__tab-container"},It=["onClick"],Rt={class:"fork-recorded-timetable__tab-day"},Ot={class:"fork-recorded-timetable__tab-date"},At={class:"fork-recorded-timetable__tab-calendar-content"},Ht={class:"fork-recorded-timetable__tab-calendar-text"},Et={class:"fork-recorded-timetable__tab-day"},Nt={class:"fork-recorded-timetable__tab-date"},Bt=ne({__name:"ForkRecordedTimetableDateTabs",props:{weekTabs:{},isOutsideWeekRange:{type:Boolean},calendarTabContent:{}},emits:["tabClick","showCalendar"],setup(e){return(t,o)=>(T(),$("div",Mt,[k("div",xt,[(T(!0),$(G,null,q(t.weekTabs,n=>(T(),$("div",{key:n.date.toDateString(),class:ke(["fork-recorded-timetable__tab",{"fork-recorded-timetable__tab--selected":n.isSelected,"fork-recorded-timetable__tab--today":n.isToday}]),onClick:a=>t.$emit("tabClick",n)},[k("div",Rt,x(n.dayOfWeek),1),k("div",Ot,x(n.label),1)],10,It))),128)),k("div",{class:ke(["fork-recorded-timetable__tab fork-recorded-timetable__tab--calendar",{"fork-recorded-timetable__tab--selected":t.isOutsideWeekRange}]),onClick:o[0]||(o[0]=n=>t.$emit("showCalendar"))},[k("div",At,[k("div",Ht,[k("div",Et,x(t.calendarTabContent.day),1),k("div",Nt,x(t.calendarTabContent.date),1)]),d(_(re),{icon:"fluent:calendar-ltr-20-regular",class:"fork-recorded-timetable__tab-calendar-icon"})])],2)])]))}}),Lt=oe(Bt,[["__scopeId","data-v-1ee51310"]]),Z=3.5,Ee=Z*60,_e=4,pe=24,Wt=25,Yt=Ee,he=60,Ft=60,Gt=(e,t)=>({setInitialScrollPosition:async()=>{if(await me(),!e.value)return;const a=new Date,i=new Date(t.value);i.setHours(_e,0,0,0);const l=Math.floor((a.getTime()-i.getTime())/(1e3*60));if(l>=0&&l<=1440){const u=l*Z,s=(e.value.clientHeight-he)/2,r=Math.max(0,u-s);e.value.scrollTop=r}else{const u=120*Z,s=(e.value.clientHeight-he)/2,r=Math.max(0,u-s);e.value.scrollTop=r}},scrollToTimePeriod:a=>{if(!e.value)return;const i=a*Ee;e.value.scrollTo({top:i,behavior:"smooth"})}}),Ut=e=>{const t=S(()=>{const n=[],a=new Date(e.value);a.setHours(_e,0,0,0);for(let i=0;i<pe;i++){const l=new Date(a.getTime()+i*60*60*1e3),u=l.toLocaleDateString("ja-JP",{month:"numeric",day:"numeric"}),c=l.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});n.push({label:`${u} ${c}`,date:u,time:c})}return n}),o=S(()=>pe*60*Z);return{timeHours:t,timetableHeight:o}},jt=e=>{const t=H(!1),o=H(null),n=H({});let a=null,i=null;return{tooltipVisible:t,tooltipProgram:o,tooltipStyle:n,showTooltip:(r,f)=>{var g;a!==null&&(clearTimeout(a),a=null),i!==null&&(clearTimeout(i),i=null);const R=f.currentTarget.getBoundingClientRect();if(!((g=e.value)==null?void 0:g.getBoundingClientRect()))return;const p=window.innerWidth/2,m=R.left<p,b=350,v=8;let M,w;m?M=R.right+v:M=R.left-b-v,w=R.top,M+b>window.innerWidth&&(M=window.innerWidth-b-16),M<16&&(M=16),w+200>window.innerHeight&&(w=window.innerHeight-200-16),w<16&&(w=16),i=window.setTimeout(()=>{o.value=r,t.value=!0,n.value={left:`${M}px`,top:`${w}px`}},300)},hideTooltip:()=>{i!==null&&(clearTimeout(i),i=null),a=window.setTimeout(()=>{t.value=!1,o.value=null},200)},onTooltipMouseEnter:()=>{a!==null&&(clearTimeout(a),a=null)},onTooltipMouseLeave:()=>{t.value=!1,o.value=null}}},Ne=e=>{const t=e.getMonth()+1,o=e.getDate();return`${t}/${o}`},De=e=>e.toLocaleDateString("ja-JP",{year:"numeric",month:"numeric",day:"numeric"}),Te=e=>e.toLocaleDateString("ja-JP",{weekday:"short"}),zt=e=>{if(e instanceof Date){const t=e.getFullYear(),o=e.getMonth(),n=e.getDate();return new Date(t,o,n)}else if(typeof e=="string"){const[t,o,n]=e.split("-").map(Number);return new Date(t,o-1,n)}else return new Date},Jt=e=>e>=4?e-4:20+e,qt=e=>new Date(e).getMinutes().toString().padStart(2,"0"),Xt=(e,t)=>{if(!e||!t)return"";const o=new Date(e),n=new Date(o.getTime()+t*1e3),a=i=>i.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${a(o)} 〜 ${a(n)}`},Kt=e=>{const t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},Qt=e=>e>=1024*1024*1024?`${(e/(1024*1024*1024)).toFixed(2)} GB`:e>=1024*1024?`${(e/(1024*1024)).toFixed(2)} MB`:`${(e/1024).toFixed(2)} KB`,Zt={"ニュース・報道":{r:59,g:130,b:246},スポーツ:{r:34,g:197,b:94},"情報・ワイドショー":{r:249,g:115,b:22},ドラマ:{r:236,g:72,b:153},音楽:{r:168,g:85,b:247},バラエティ:{r:234,g:179,b:8},映画:{r:239,g:68,b:68},"アニメ・特撮":{r:6,g:182,b:212},"ドキュメンタリー・教養":{r:161,g:98,b:7},"劇場・公演":{r:147,g:51,b:234},"趣味・教育":{r:20,g:184,b:166},福祉:{r:132,g:204,b:22},その他:{r:107,g:114,b:128}},B={NORMAL:.08,SINGLE:.12,HOVER:.14,SINGLE_HOVER:.18,STRIPE:1},ye=(e,t=3)=>!e||e.length===0?[]:e.slice(0,t).map(o=>Zt[o.major]).filter(o=>o!==void 0),ea=e=>{const t=ye(e);if(t.length===0)return null;const o=t.map(n=>`rgba(${n.r}, ${n.g}, ${n.b}, ${B.STRIPE})`);return o.length===1?o[0]:o.length===2?`linear-gradient(to bottom, ${o[0]} 0%, ${o[0]} 50%, ${o[1]} 50%, ${o[1]} 100%)`:`linear-gradient(to bottom, ${o[0]} 0%, ${o[0]} 33.33%, ${o[1]} 33.33%, ${o[1]} 66.66%, ${o[2]} 66.66%, ${o[2]} 100%)`},ta=e=>{const t=ye(e),o="rgb(var(--v-theme-surface))";if(t.length===0)return o;if(t.length===1){const n=t[0];return`linear-gradient(rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE}), rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE})), ${o}`}else if(t.length===2){const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.NORMAL}) 100%), ${o}`}else{const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.NORMAL}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.NORMAL}) 100%), ${o}`}},aa=e=>{const t=ye(e),o="rgb(var(--v-theme-surface))";if(t.length===0)return"rgb(var(--v-theme-primary-lighten-4))";if(t.length===1){const n=t[0];return`linear-gradient(rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE_HOVER}), rgba(${n.r}, ${n.g}, ${n.b}, ${B.SINGLE_HOVER})), ${o}`}else if(t.length===2){const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.HOVER}) 100%), ${o}`}else{const n=t[0],a=t[1];return`linear-gradient(135deg, rgba(${n.r}, ${n.g}, ${n.b}, ${B.HOVER}) 0%, rgba(${a.r}, ${a.g}, ${a.b}, ${B.HOVER}) 100%), ${o}`}},na=(e,t,o)=>{const n=new Date(e.start_time),a=new Date(o);a.setHours(_e,0,0,0);const i=Math.floor((n.getTime()-a.getTime())/(1e3*60)),l=e.duration/60,u=i*Z,c=Math.max(l*Z,Wt),s=ta(e.genres),r=ea(e.genres),f=aa(e.genres),P={position:"absolute",top:`${u}px`,height:`${c}px`,width:"100%",left:"0",zIndex:String(t)};return s&&(P.background=s),r&&(P["--genre-stripe"]=r),f&&(P["--genre-bg-hover"]=f),P},oa=(e,t)=>{const o=new Date(t);o.setHours(_e,0,0,0);const n=Math.floor((e.getTime()-o.getTime())/(1e3*60));return n<0||n>24*60?null:n*Z},ra={class:"fork-recorded-timetable__grid"},ia={class:"fork-recorded-timetable__time-column"},la={class:"fork-recorded-timetable__time-date"},sa={class:"fork-recorded-timetable__time-hour"},da=["onClick","onMouseenter"],ca={class:"fork-recorded-timetable__program-content"},ua={class:"fork-recorded-timetable__program-minutes"},ma={class:"fork-recorded-timetable__program-info"},va={class:"fork-recorded-timetable__program-title"},fa={key:0,class:"fork-recorded-timetable__program-subtitle"},_a={key:1,class:"fork-recorded-timetable__program-description"},ka={class:"fork-recorded-timetable__tooltip-time"},ha={class:"fork-recorded-timetable__tooltip-title"},ga={key:0,class:"fork-recorded-timetable__tooltip-subtitle"},ba={key:1,class:"fork-recorded-timetable__tooltip-description"},ya={key:2,class:"fork-recorded-timetable__tooltip-genres"},pa={class:"fork-recorded-timetable__tooltip-genre-list"},Da={key:3,class:"fork-recorded-timetable__tooltip-video-info"},Ta={class:"fork-recorded-timetable__tooltip-info-grid"},$a={key:0},Pa={class:"fork-recorded-timetable__tooltip-info-value"},wa={key:1},Sa={class:"fork-recorded-timetable__tooltip-info-value"},Ca={key:2},Va={class:"fork-recorded-timetable__tooltip-info-value"},Ma={key:3},xa={class:"fork-recorded-timetable__tooltip-info-value"},Ia={key:4,class:"fork-recorded-timetable__tooltip-detail"},Ra={key:0,class:"fork-recorded-timetable__tooltip-detail-section"},Oa={class:"fork-recorded-timetable__tooltip-label"},Aa={class:"fork-recorded-timetable__tooltip-detail-content"},Ha=ne({__name:"ForkRecordedTimetableGrid",props:{programs:{},channels:{},displayDate:{},currentTime:{}},emits:["programClick"],setup(e,{expose:t}){const o=e,n=H(null),a=ge(o,"displayDate"),{timeHours:i,timetableHeight:l}=Ut(a),{setInitialScrollPosition:u,scrollToTimePeriod:c}=Gt(n,a),{tooltipVisible:s,tooltipProgram:r,tooltipStyle:f,showTooltip:P,hideTooltip:R,onTooltipMouseEnter:h,onTooltipMouseLeave:p}=jt(n),m=S(()=>{const w=o.channels.length;return`${Ft}px repeat(${w}, 1fr)`}),b=w=>o.programs.filter(g=>g.channel_id===w).sort((g,N)=>new Date(g.start_time).getTime()-new Date(N.start_time).getTime()),v=(w,g)=>na(w,g,o.displayDate),M=()=>{const w=oa(o.currentTime,o.displayDate);return w===null?{display:"none"}:{position:"absolute",top:`${w}px`,left:"0",right:"0",height:"2px",background:"#ff4444",zIndex:20,gridColumn:"1 / -1",gridRow:2,pointerEvents:"none"}};return t({scrollToTimePeriod:c,setInitialScrollPosition:u}),ve(()=>{u()}),(w,g)=>{var N,W,Y,y,I,A,V,C,E,j;return T(),$("div",ra,[k("div",{class:"fork-recorded-timetable__body",ref_key:"scrollContainer",ref:n},[k("div",{class:"fork-recorded-timetable__grid-container",style:ae({gridTemplateColumns:m.value,height:`${_(l)+_(he)}px`})},[g[3]||(g[3]=k("div",{class:"fork-recorded-timetable__time-column-header"},"時間",-1)),(T(!0),$(G,null,q(w.channels,D=>(T(),$("div",{key:D.id,class:"fork-recorded-timetable__channel-header"},x(D.name),1))),128)),k("div",ia,[(T(!0),$(G,null,q(_(i),D=>(T(),$("div",{key:D.label,class:"fork-recorded-timetable__time-label",style:ae({height:`${_(Yt)}px`})},[k("div",la,x(D.date),1),k("div",sa,x(D.time),1)],4))),128))]),(T(!0),$(G,null,q(w.channels,(D,te)=>(T(),$("div",{key:D.id,class:"fork-recorded-timetable__channel-column",style:ae({gridColumn:te+2,gridRowStart:2})},[(T(!0),$(G,null,q(b(D.id),(F,Ue)=>(T(),$("div",{key:F.id,class:"fork-recorded-timetable__program-item",style:ae(v(F,Ue)),onClick:se=>w.$emit("programClick",F),onMouseenter:se=>_(P)(F,se),onMouseleave:g[0]||(g[0]=(...se)=>_(R)&&_(R)(...se))},[k("div",ca,[k("div",ua,x(_(qt)(F.start_time)),1),k("div",ma,[k("div",va,x(F.title),1),F.subtitle?(T(),$("div",fa,x(F.subtitle),1)):O("",!0),F.description?(T(),$("div",_a,x(F.description),1)):O("",!0)])])],44,da))),128))],4))),128)),k("div",{class:"fork-recorded-timetable__current-time-line",style:ae(M())},null,4)],4)],512),_(s)?(T(),$("div",{key:0,class:"fork-recorded-timetable__tooltip",style:ae(_(f)),onMouseenter:g[1]||(g[1]=(...D)=>_(h)&&_(h)(...D)),onMouseleave:g[2]||(g[2]=(...D)=>_(p)&&_(p)(...D))},[k("div",ka,x(_(Xt)((N=_(r))==null?void 0:N.start_time,(W=_(r))==null?void 0:W.duration)),1),k("div",ha,x((Y=_(r))==null?void 0:Y.title),1),(y=_(r))!=null&&y.subtitle?(T(),$("div",ga,x((I=_(r))==null?void 0:I.subtitle),1)):O("",!0),(A=_(r))!=null&&A.description?(T(),$("div",ba,x((V=_(r))==null?void 0:V.description),1)):O("",!0),(C=_(r))!=null&&C.genres&&_(r).genres.length>0?(T(),$("div",ya,[g[4]||(g[4]=k("div",{class:"fork-recorded-timetable__tooltip-label"},"ジャンル",-1)),k("div",pa,[(T(!0),$(G,null,q(_(r).genres,(D,te)=>(T(),$("span",{key:te,class:"fork-recorded-timetable__tooltip-genre-tag"},x(D.major)+x(D.middle?` / ${D.middle}`:""),1))),128))])])):O("",!0),(E=_(r))!=null&&E.recorded_video?(T(),$("div",Da,[g[9]||(g[9]=k("div",{class:"fork-recorded-timetable__tooltip-label"},"録画情報",-1)),k("div",Ta,[_(r).recorded_video.video_resolution_width&&_(r).recorded_video.video_resolution_height?(T(),$("div",$a,[g[5]||(g[5]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"解像度:",-1)),k("span",Pa,x(_(r).recorded_video.video_resolution_width)+"×"+x(_(r).recorded_video.video_resolution_height),1)])):O("",!0),_(r).recorded_video.video_codec?(T(),$("div",wa,[g[6]||(g[6]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"映像:",-1)),k("span",Sa,x(_(r).recorded_video.video_codec),1)])):O("",!0),_(r).recorded_video.duration?(T(),$("div",Ca,[g[7]||(g[7]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"実録画時間:",-1)),k("span",Va,x(_(Kt)(_(r).recorded_video.duration)),1)])):O("",!0),_(r).recorded_video.file_size?(T(),$("div",Ma,[g[8]||(g[8]=k("span",{class:"fork-recorded-timetable__tooltip-info-key"},"ファイルサイズ:",-1)),k("span",xa,x(_(Qt)(_(r).recorded_video.file_size)),1)])):O("",!0)])])):O("",!0),(j=_(r))!=null&&j.detail?(T(),$("div",Ia,[(T(!0),$(G,null,q(_(r).detail,(D,te)=>(T(),$(G,{key:te},[D?(T(),$("div",Ra,[k("div",Oa,x(te),1),k("div",Aa,x(D),1)])):O("",!0)],64))),128))])):O("",!0)],36)):O("",!0)])}}}),Ea=oe(Ha,[["__scopeId","data-v-2ca03811"]]),Na={class:"fork-recorded-timetable__header"},Ba={class:"fork-recorded-timetable__title"},La={class:"fork-recorded-timetable__title-text"},Wa={key:0,class:"fork-recorded-timetable__title-loading"},Ya={key:1,class:"fork-recorded-timetable__title-count"},Fa={class:"fork-recorded-timetable__controls"},Ga={class:"fork-recorded-timetable__date-display ml-4"},Ua=ne({__name:"ForkRecordedTimetableHeader",props:{title:{},isLoading:{type:Boolean},totalPrograms:{},currentDateLabel:{}},emits:["previousDay","today","nextDay"],setup(e){return(t,o)=>(T(),$("div",Na,[k("div",Ba,[k("span",La,x(t.title),1),t.isLoading?(T(),$("span",Wa,[d(_(re),{icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"}),o[3]||(o[3]=k("span",null,"読み込み中...",-1))])):O("",!0),t.isLoading?O("",!0):(T(),$("span",Ya,x(t.totalPrograms)+"件の録画番組 ",1))]),k("div",Fa,[d(L,{variant:"outlined",size:"small",onClick:o[0]||(o[0]=n=>t.$emit("previousDay")),class:"mr-2"},{default:U(()=>[d(_(re),{icon:"fluent:chevron-left-20-regular",width:"18px"}),o[4]||(o[4]=K(" 前日 ",-1))]),_:1,__:[4]}),d(L,{variant:"outlined",color:"primary",onClick:o[1]||(o[1]=n=>t.$emit("today")),class:"mr-2"},{default:U(()=>[d(_(re),{icon:"fluent:calendar-ltr-20-regular",width:"18px",class:"mr-1"}),o[5]||(o[5]=K(" 今日 ",-1))]),_:1,__:[5]}),d(L,{variant:"outlined",size:"small",onClick:o[2]||(o[2]=n=>t.$emit("nextDay"))},{default:U(()=>[o[6]||(o[6]=K(" 翌日 ",-1)),d(_(re),{icon:"fluent:chevron-right-20-regular",width:"18px",class:"ml-1"})]),_:1,__:[6]}),k("div",Ga,x(t.currentDateLabel),1)])]))}}),ja=oe(Ua,[["__scopeId","data-v-ed3cc0c7"]]),za={class:"fork-recorded-timetable__time-section"},Ja={class:"fork-recorded-timetable__time-buttons"},qa=["onClick"],Xa={class:"fork-recorded-timetable__time-button-label"},Ka={class:"fork-recorded-timetable__time-button-time"},Qa=ne({__name:"ForkRecordedTimetableTimePeriods",props:{timePeriods:{},selectedTimePeriod:{}},emits:["scrollToPeriod"],setup(e){return(t,o)=>(T(),$("div",za,[k("div",Ja,[(T(!0),$(G,null,q(t.timePeriods,n=>(T(),$("button",{key:n.key,class:ke(["fork-recorded-timetable__time-button",{"fork-recorded-timetable__time-button--selected":t.selectedTimePeriod===n.key}]),onClick:a=>t.$emit("scrollToPeriod",n)},[k("span",Xa,x(n.label),1),k("span",Ka,x(n.startTime),1)],10,qa))),128))])]))}}),Za=oe(Qa,[["__scopeId","data-v-1a487513"]]),en=(e,t,o)=>t?"今日":o===1?"昨日":Ne(e),tn=e=>{const t=S(()=>{const a=[],i=new Date;for(let l=0;l>=-6;l--){const u=new Date(i);u.setDate(i.getDate()+l);const c=l===0,s=u.toDateString()===e.value.toDateString();a.push({date:new Date(u),label:en(u,c,Math.abs(l)),isToday:c,isSelected:s,dayOfWeek:Te(u),daysAgo:Math.abs(l)})}return a}),o=S(()=>{const a=new Date,i=e.value.toDateString();for(let l=0;l>=-6;l--){const u=new Date(a);if(u.setDate(a.getDate()+l),u.toDateString()===i)return!1}return!0}),n=S(()=>o.value?{day:Te(e.value),date:Ne(e.value)}:{day:"日付",date:"選択"});return{weekTabs:t,isOutsideWeekRange:o,calendarTabContent:n}},an=[{key:"morning",label:"朝",startTime:"04:00",hour:4},{key:"noon",label:"昼",startTime:"10:00",hour:10},{key:"evening",label:"夕",startTime:"16:00",hour:16},{key:"midnight",label:"深夜",startTime:"21:00",hour:21}],Be=J({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},modeIcon:{type:de,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),$e=X()({name:"VDatePickerControls",props:Be(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:o}=t;const n=S(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=S(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),i=S(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=S(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function u(){o("click:prev")}function c(){o("click:next")}function s(){o("click:year")}function r(){o("click:month")}return ee(()=>d("div",{class:["v-date-picker-controls"]},[d(L,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:n.value,text:e.text,variant:"text",rounded:!0,onClick:r},null),d(L,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:s},null),d(Ae,null,null),d("div",{class:"v-date-picker-controls__month"},[d(L,{"data-testid":"prev-month",disabled:i.value,icon:e.prevIcon,variant:"text",onClick:u},null),d(L,{"data-testid":"next-month",disabled:l.value,icon:e.nextIcon,variant:"text",onClick:c},null)])])),{}}}),nn=J({appendIcon:de,color:String,header:String,transition:String,onClick:je()},"VDatePickerHeader"),Pe=X()({name:"VDatePickerHeader",props:nn(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:o,slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:i}=be(e,"color");function l(){o("click")}function u(){o("click:append")}return ee(()=>{const c=!!(n.default||e.header),s=!!(n.append||e.appendIcon);return d("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value],style:i.value,onClick:l},[n.prepend&&d("div",{key:"prepend",class:"v-date-picker-header__prepend"},[n.prepend()]),c&&d(He,{key:"content",name:e.transition},{default:()=>{var r;return[d("div",{key:e.header,class:"v-date-picker-header__content"},[((r=n.default)==null?void 0:r.call(n))??e.header])]}}),s&&d("div",{class:"v-date-picker-header__append"},[n.append?d(fe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var r;return[(r=n.append)==null?void 0:r.call(n)]}}):d(L,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),on=J({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function rn(e){const t=le(),o=Q(e,"modelValue",[],h=>ce(h).map(p=>t.date(p))),n=S(()=>e.displayValue?t.date(e.displayValue):o.value.length>0?t.date(o.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=Q(e,"year",void 0,h=>{const p=h!=null?Number(h):t.getYear(n.value);return t.startOfYear(t.setYear(t.date(),p))},h=>t.getYear(h)),i=Q(e,"month",void 0,h=>{const p=h!=null?Number(h):t.getMonth(n.value),m=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(m,p)},h=>t.getMonth(h)),l=S(()=>e.firstDayOfWeek??e.weekdays[0]),u=S(()=>{const h=Number(e.firstDayOfWeek??0);return e.weekdays.map(p=>(p+h)%7)}),c=S(()=>{const h=t.getWeekArray(i.value,l.value),p=h.flat(),m=6*7;if(e.weeksInMonth==="static"&&p.length<m){const b=p[p.length-1];let v=[];for(let M=1;M<=m-p.length;M++)v.push(t.addDays(b,M)),M%7===0&&(h.push(v),v=[])}return h});function s(h,p){return h.filter(m=>u.value.includes(t.toJsDate(m).getDay())).map((m,b)=>{const v=t.toISO(m),M=!t.isSameMonth(m,i.value),w=t.isSameDay(m,t.startOfMonth(i.value)),g=t.isSameDay(m,t.endOfMonth(i.value)),N=t.isSameDay(m,i.value);return{date:m,isoDate:v,formatted:t.format(m,"keyboardDate"),year:t.getYear(m),month:t.getMonth(m),isDisabled:R(m),isWeekStart:b%7===0,isWeekEnd:b%7===6,isToday:t.isSameDay(m,p),isAdjacent:M,isHidden:M&&!e.showAdjacentMonths,isStart:w,isSelected:o.value.some(W=>t.isSameDay(m,W)),isEnd:g,isSame:N,localized:t.format(m,"dayOfMonth")}})}const r=S(()=>{const h=t.startOfWeek(n.value,e.firstDayOfWeek),p=[];for(let b=0;b<=6;b++)p.push(t.addDays(h,b));const m=t.date();return s(p,m)}),f=S(()=>{const h=c.value.flat(),p=t.date();return s(h,p)}),P=S(()=>c.value.map(h=>h.length?ze(t,h[0]):null));function R(h){if(e.disabled)return!0;const p=t.date(h);return e.min&&t.isAfter(t.date(e.min),p)||e.max&&t.isAfter(p,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(m=>t.isSameDay(t.date(m),p)):typeof e.allowedDates=="function"?!e.allowedDates(p):!1}return{displayValue:n,daysInMonth:f,daysInWeek:r,genDays:s,model:o,weeksInMonth:c,weekDays:u,weekNumbers:P}}const Le=J({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ie(on(),["displayValue"])},"VDatePickerMonth"),we=X()({name:"VDatePickerMonth",props:Le(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=H(),{daysInMonth:i,model:l,weekNumbers:u}=rn(e),c=le(),s=ue(),r=ue(),f=ue(!1),P=S(()=>f.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(s.value=l.value[0],l.value.length>1&&(r.value=l.value[l.value.length-1]));const R=S(()=>{const b=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=b});xe(i,(b,v)=>{v&&(f.value=c.isBefore(b[0].date,v[0].date))});function h(b){const v=c.startOfDay(b);if(l.value.length===0?s.value=void 0:l.value.length===1&&(s.value=l.value[0],r.value=void 0),!s.value)s.value=v,l.value=[s.value];else if(r.value)s.value=b,r.value=void 0,l.value=[s.value];else{if(c.isSameDay(v,s.value)){s.value=void 0,l.value=[];return}else c.isBefore(v,s.value)?(r.value=c.endOfDay(s.value),s.value=v):r.value=c.endOfDay(v);const M=c.getDiff(r.value,s.value,"days"),w=[s.value];for(let g=1;g<M;g++){const N=c.addDays(s.value,g);w.push(N)}w.push(r.value),l.value=w}}function p(b){const v=l.value.findIndex(M=>c.isSameDay(M,b));if(v===-1)l.value=[...l.value,b];else{const M=[...l.value];M.splice(v,1),l.value=M}}function m(b){e.multiple==="range"?h(b):e.multiple?p(b):l.value=[b]}return()=>d("div",{class:"v-date-picker-month"},[e.showWeek&&d("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&d("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[K(" ")]),u.value.map(b=>d("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[b]))]),d(He,{name:P.value},{default:()=>{var b;return[d("div",{ref:a,key:(b=i.value[0].date)==null?void 0:b.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&c.getWeekdays(e.firstDayOfWeek).map(v=>d("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[v])),i.value.map((v,M)=>{const w={props:{onClick:()=>m(v.date)},item:v,i:M};return R.value&&!v.isSelected&&(v.isDisabled=!0),d("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}],"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&d(fe,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(v.isSelected||v.isToday)&&!v.isDisabled?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,text:v.localized,variant:v.isDisabled?v.isToday?"outlined":"text":v.isToday&&!v.isSelected?"outlined":"flat",onClick:()=>m(v.date)}}},{default:()=>{var g;return[((g=n.day)==null?void 0:g.call(n,w))??d(L,w.props,null)]}})])})])]}})])}}),We=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Se=X()({name:"VDatePickerMonths",props:We(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=le(),i=Q(e,"modelValue"),l=S(()=>{let u=a.startOfYear(a.date());return e.year&&(u=a.setYear(u,e.year)),Ie(12).map(c=>{const s=a.format(u,"monthShort"),r=!!(e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),u)||e.max&&a.isAfter(u,a.startOfMonth(a.date(e.max))));return u=a.getNextMonth(u),{isDisabled:r,text:s,value:c}})});return Re(()=>{i.value=i.value??a.getMonth(a.date())}),ee(()=>d("div",{class:"v-date-picker-months",style:{height:Oe(e.height)}},[d("div",{class:"v-date-picker-months__content"},[l.value.map((u,c)=>{var f;const s={active:i.value===c,color:i.value===c?e.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:i.value===u.value?"flat":"text",onClick:()=>r(c)};function r(P){if(i.value===P){o("update:modelValue",i.value);return}i.value=P}return((f=n.month)==null?void 0:f.call(n,{month:u,i:c,props:s}))??d(L,z({key:"month"},s),null)})])])),{}}}),Ye=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ce=X()({name:"VDatePickerYears",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=le(),i=Q(e,"modelValue"),l=S(()=>{const c=a.getYear(a.date());let s=c-100,r=c+52;e.min&&(s=a.getYear(a.date(e.min))),e.max&&(r=a.getYear(a.date(e.max)));let f=a.startOfYear(a.date());return f=a.setYear(f,s),Ie(r-s+1,s).map(P=>{const R=a.format(f,"year");return f=a.setYear(f,a.getYear(f)+1),{text:R,value:P}})});Re(()=>{i.value=i.value??a.getYear(a.date())});const u=Je();return ve(async()=>{var c;await me(),(c=u.el)==null||c.scrollIntoView({block:"center"})}),ee(()=>d("div",{class:"v-date-picker-years",style:{height:Oe(e.height)}},[d("div",{class:"v-date-picker-years__content"},[l.value.map((c,s)=>{var f;const r={ref:i.value===c.value?u:void 0,active:i.value===c.value,color:i.value===c.value?e.color:void 0,rounded:!0,text:c.text,variant:i.value===c.value?"flat":"text",onClick:()=>{if(i.value===c.value){o("update:modelValue",i.value);return}i.value=c.value}};return((f=n.year)==null?void 0:f.call(n,{year:c,i:s,props:r}))??d(L,z({key:"month"},r),null)})])])),{}}}),ln=St("v-picker-title"),Fe=J({color:String,...ct(),...dt(),...st(),...lt(),...it(),...rt(),...ot(),...nt(),...at()},"VSheet"),Ve=X()({name:"VSheet",props:Fe(),setup(e,t){let{slots:o}=t;const{themeClasses:n}=qe(e),{backgroundColorClasses:a,backgroundColorStyles:i}=be(ge(e,"color")),{borderClasses:l}=Xe(e),{dimensionStyles:u}=Ke(e),{elevationClasses:c}=Qe(e),{locationStyles:s}=Ze(e),{positionClasses:r}=et(e),{roundedClasses:f}=tt(e);return ee(()=>d(e.tag,{class:["v-sheet",n.value,a.value,l.value,c.value,r.value,f.value,e.class],style:[i.value,u.value,s.value,e.style]},o)),{}}}),Ge=J({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Fe()},"VPicker"),Me=X()({name:"VPicker",props:Ge(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:n,backgroundColorStyles:a}=be(ge(e,"color"));return ee(()=>{const i=Ve.filterProps(e),l=!!(e.title||o.title);return d(Ve,z(i,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&d("div",{key:"header",class:[n.value],style:[a.value]},[l&&d(ln,{key:"picker-title"},{default:()=>{var c;return[((c=o.title)==null?void 0:c.call(o))??e.title]}}),o.header&&d("div",{class:"v-picker__header"},[o.header()])]),d("div",{class:"v-picker__body"},[(u=o.default)==null?void 0:u.call(o)]),o.actions&&d(fe,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[d("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),sn=J({header:{type:String,default:"$vuetify.datePicker.header"},...Be(),...Le({weeksInMonth:"static"}),...ie(We(),["modelValue"]),...ie(Ye(),["modelValue"]),...Ge({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),dn=X()({name:"VDatePicker",props:sn(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:o,slots:n}=t;const a=le(),{t:i}=ut(),l=Q(e,"modelValue",void 0,y=>ce(y).map(I=>a.date(I)),y=>e.multiple?y:y[0]),u=Q(e,"viewMode"),c=S(()=>{const y=a.date(e.min);return e.min&&a.isValid(y)?y:null}),s=S(()=>{const y=a.date(e.max);return e.max&&a.isValid(y)?y:null}),r=S(()=>{var A;const y=a.date();let I=y;return(A=l.value)!=null&&A[0]?I=a.date(l.value[0]):c.value&&a.isBefore(y,c.value)?I=c.value:s.value&&a.isAfter(y,s.value)&&(I=s.value),I&&a.isValid(I)?I:y}),f=H(Number(e.month??a.getMonth(a.startOfMonth(r.value)))),P=H(Number(e.year??a.getYear(a.startOfYear(a.setMonth(r.value,f.value))))),R=ue(!1),h=S(()=>e.multiple&&l.value.length>1?i("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&a.isValid(l.value[0])?a.format(a.date(l.value[0]),"normalDateWithWeekday"):i(e.header)),p=S(()=>{let y=a.date();return y=a.setDate(y,1),y=a.setMonth(y,f.value),y=a.setYear(y,P.value),a.format(y,"monthAndYear")}),m=S(()=>`date-picker-header${R.value?"-reverse":""}-transition`),b=S(()=>{if(e.disabled)return!0;const y=[];if(u.value!=="month")y.push("prev","next");else{let I=a.date();if(I=a.startOfMonth(I),I=a.setMonth(I,f.value),I=a.setYear(I,P.value),c.value){const A=a.addDays(a.startOfMonth(I),-1);a.isAfter(c.value,A)&&y.push("prev")}if(s.value){const A=a.addDays(a.endOfMonth(I),1);a.isAfter(A,s.value)&&y.push("next")}}return y});function v(){f.value<11?f.value++:(P.value++,f.value=0,Y(P.value)),W(f.value)}function M(){f.value>0?f.value--:(P.value--,f.value=11,Y(P.value)),W(f.value)}function w(){u.value="month"}function g(){u.value=u.value==="months"?"month":"months"}function N(){u.value=u.value==="year"?"month":"year"}function W(y){u.value==="months"&&g(),o("update:month",y)}function Y(y){u.value==="year"&&N(),o("update:year",y)}return xe(l,(y,I)=>{const A=ce(I),V=ce(y);if(!V.length)return;const C=a.date(A[A.length-1]),E=a.date(V[V.length-1]),j=a.getMonth(E),D=a.getYear(E);j!==f.value&&(f.value=j,W(f.value)),D!==P.value&&(P.value=D,Y(P.value)),R.value=a.isBefore(C,E)}),ee(()=>{const y=Me.filterProps(e),I=$e.filterProps(e),A=Pe.filterProps(e),V=we.filterProps(e),C=ie(Se.filterProps(e),["modelValue"]),E=ie(Ce.filterProps(e),["modelValue"]),j={header:h.value,transition:m.value};return d(Me,z(y,{class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var D;return((D=n.title)==null?void 0:D.call(n))??d("div",{class:"v-date-picker__title"},[i(e.title)])},header:()=>n.header?d(fe,{defaults:{VDatePickerHeader:{...j}}},{default:()=>{var D;return[(D=n.header)==null?void 0:D.call(n,j)]}}):d(Pe,z({key:"header"},A,j,{onClick:u.value!=="month"?w:void 0}),{...n,default:void 0}),default:()=>d(G,null,[d($e,z(I,{disabled:b.value,text:p.value,"onClick:next":v,"onClick:prev":M,"onClick:month":g,"onClick:year":N}),null),d(Ct,{hideOnLeave:!0},{default:()=>[u.value==="months"?d(Se,z({key:"date-picker-months"},C,{modelValue:f.value,"onUpdate:modelValue":[D=>f.value=D,W],min:c.value,max:s.value,year:P.value}),null):u.value==="year"?d(Ce,z({key:"date-picker-years"},E,{modelValue:P.value,"onUpdate:modelValue":[D=>P.value=D,Y],min:c.value,max:s.value}),null):d(we,z({key:"date-picker-month"},V,{modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,month:f.value,"onUpdate:month":[D=>f.value=D,W],year:P.value,"onUpdate:year":[D=>P.value=D,Y],min:c.value,max:s.value}),null)]})]),actions:n.actions})}),{}}}),cn={class:"fork-recorded-timetable"},un={class:"fork-recorded-timetable__navigation"},mn={class:"fork-recorded-timetable__content"},vn={key:1,class:"fork-recorded-timetable__loading"},fn=ne({__name:"ForkRecordedTimetable",props:{title:{},programs:{default:()=>[]},channels:{default:()=>[]},isLoading:{type:Boolean,default:!1},initialDate:{}},emits:["programClick","fetchProgramData"],setup(e,{emit:t}){const o=e,n=t,a=H(new Date),i=H(!1),l=H(new Date().toISOString().substring(0,10)),u=H(""),c=H(new Date),s=H(null);let r=null;const{weekTabs:f,isOutsideWeekRange:P,calendarTabContent:R}=tn(a),h=an,p=S(()=>o.channels||[]),m=S(()=>o.programs||[]),b=S(()=>{const V=a.value,C=new Date(V);return C.setDate(V.getDate()+1),`${De(V)} 4:00 〜 ${De(C)} 4:00`}),v=S(()=>m.value.length),M=V=>{n("programClick",V)},w=V=>{a.value=new Date(V),n("fetchProgramData",V)},g=V=>{const C=new Date(a.value);C.setDate(C.getDate()+V),w(C)},N=()=>{g(-1)},W=()=>{g(1)},Y=()=>{w(new Date)},y=V=>{w(V.date)},I=()=>{const V=zt(l.value);i.value=!1,w(V)},A=async V=>{if(u.value=V.key,await me(),!s.value)return;const C=Jt(V.hour);s.value.scrollToTimePeriod(C)};return ve(async()=>{a.value=o.initialDate||new Date,n("fetchProgramData",a.value),c.value=new Date,r=window.setInterval(()=>{c.value=new Date},6e4),await me(),setTimeout(()=>{s.value&&s.value.setInitialScrollPosition()},100)}),mt(()=>{r&&(clearInterval(r),r=null)}),(V,C)=>(T(),$("div",cn,[d(ja,{title:V.title,"is-loading":V.isLoading,"total-programs":v.value,"current-date-label":b.value,onPreviousDay:N,onToday:Y,onNextDay:W},null,8,["title","is-loading","total-programs","current-date-label"]),k("div",un,[d(Lt,{"week-tabs":_(f),"is-outside-week-range":_(P),"calendar-tab-content":_(R),onTabClick:y,onShowCalendar:C[0]||(C[0]=E=>i.value=!0)},null,8,["week-tabs","is-outside-week-range","calendar-tab-content"]),d(Za,{"time-periods":_(h),"selected-time-period":u.value,onScrollToPeriod:A},null,8,["time-periods","selected-time-period"])]),k("div",mn,[V.isLoading?O("",!0):(T(),vt(Ea,{key:0,ref_key:"gridRef",ref:s,programs:m.value,channels:p.value,"display-date":a.value,"current-time":c.value,onProgramClick:M},null,8,["programs","channels","display-date","current-time"])),V.isLoading?(T(),$("div",vn,[d(ft,{indeterminate:"",color:"primary",size:"48"}),C[4]||(C[4]=k("p",{class:"mt-4"},"番組表を読み込んでいます...",-1))])):O("",!0)]),d(Dt,{modelValue:i.value,"onUpdate:modelValue":C[3]||(C[3]=E=>i.value=E),"max-width":"400px"},{default:U(()=>[d(Tt,null,{default:U(()=>[d($t,null,{default:U(()=>C[5]||(C[5]=[K("日付を選択",-1)])),_:1,__:[5]}),d(Pt,null,{default:U(()=>[d(dn,{modelValue:l.value,"onUpdate:modelValue":C[1]||(C[1]=E=>l.value=E),max:new Date().toISOString().substring(0,10),"show-adjacent-months":""},null,8,["modelValue","max"])]),_:1}),d(wt,null,{default:U(()=>[d(Ae),d(L,{variant:"text",onClick:C[2]||(C[2]=E=>i.value=!1)},{default:U(()=>C[6]||(C[6]=[K("キャンセル",-1)])),_:1,__:[6]}),d(L,{color:"primary",onClick:I},{default:U(()=>C[7]||(C[7]=[K("選択",-1)])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),_n=oe(fn,[["__scopeId","data-v-20cb4cc3"]]),kn={class:"route-container"},hn={class:"recorded-timetable-container-wrapper"},gn={class:"recorded-timetable-container"},bn=ne({__name:"ForkRecordedTimetableView",setup(e){const t=ht(),o=_t(),n=H(!0),a=S(()=>{const s=o.query.date;if(s){const r=new Date(s);if(!isNaN(r.getTime())&&r<=new Date)return r}}),i=H([]),l=H([]),u=s=>{const r=o.query.date;t.push({path:`/videos/watch/${s.id}`,query:{referrer:"fork-timetable",...r&&{timetable_date:r}}})},c=async s=>{n.value=!0;const r=s.getFullYear(),f=String(s.getMonth()+1).padStart(2,"0"),P=String(s.getDate()).padStart(2,"0"),R=`${r}-${f}-${P}`;t.replace({query:{date:R}});try{const h=await Vt.fetchVideoTimetable(R);if(h){i.value=h.recorded_programs.map(m=>{var b;return{id:m.id,title:m.title,subtitle:m.subtitle||void 0,description:m.description||void 0,start_time:m.start_time,duration:m.duration,channel_id:((b=m.channel)==null?void 0:b.id)||"",genres:m.genres,detail:m.detail,recorded_video:m.recorded_video?{file_size:m.recorded_video.file_size,duration:m.recorded_video.duration,video_resolution_width:m.recorded_video.video_resolution_width,video_resolution_height:m.recorded_video.video_resolution_height,video_codec:m.recorded_video.video_codec}:void 0}});const p=new Map;h.recorded_programs.forEach(m=>{m.channel&&!p.has(m.channel.id)&&p.set(m.channel.id,m.channel)}),l.value=Array.from(p.values()).sort((m,b)=>m.channel_number.localeCompare(b.channel_number)).map(m=>({id:m.id,name:m.name}))}else i.value=[],l.value=[]}catch(h){console.error("番組データの取得に失敗しました:",h),i.value=[],l.value=[]}finally{n.value=!1}};return ve(async()=>{await kt().fetchUser(),n.value=!1}),(s,r)=>(T(),$("div",kn,[d(bt),k("main",null,[d(yt),k("div",hn,[d(pt),k("div",gn,[d(gt,{crumbs:[{name:"ホーム",path:"/"},{name:"ビデオをみる",path:"/videos/"},{name:"録画番組番組表（Fork版）",path:"/fork/videos/timetable",disabled:!0}]}),d(_n,{title:"録画番組番組表（Fork版）",programs:i.value,channels:l.value,isLoading:n.value,initialDate:a.value,onFetchProgramData:c,onProgramClick:u},null,8,["programs","channels","isLoading","initialDate"])])])])]))}}),xn=oe(bn,[["__scopeId","data-v-5e860c4f"]]);export{xn as default};
