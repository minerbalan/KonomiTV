import{K as Ve,L as ke,$ as Pe,Z as Ce,E as f,X as xe,a2 as $e,a0 as De,a,Y as ee,d as X,U as se,P as Z,_ as Y,c,e as h,b as e,t as y,F as q,g as re,r as Q,o as l,q as D,aK as O,s as G,x as ce,l as b,B as A,i as Re,n as M,w as N,k as j,h as p,V as I,M as T,R as K}from"./index-DeuHV4uV.js";import{u as Se}from"./SPHeaderBar-CXBPSjNV.js";import{V as Ue}from"./VSwitch-EvGbZM2C.js";import{V as Be}from"./VSlider-CdC0KD0P.js";import{u as Ee,m as Ie,V as ae,b as F}from"./VTextField-DasP7VLH.js";import{m as Te,e as te,V as z}from"./VSelect-DaCxzYjV.js";import{u as Le,R as J}from"./ServerSettingsStore-Brd5keeW.js";import{V as ne}from"./VDialog-K6lQZcq4.js";import{V as ie,a as oe,b as le,c as de}from"./VCard-CjJaWFKo.js";import{V as ue}from"./ssrBoot-saFcwPkN.js";const Me=ke({...Ie(),...$e(Te(),["inline"])},"VCheckbox"),Fe=Ve()({name:"VCheckbox",inheritAttrs:!1,props:Me(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,x){let{attrs:u,slots:P}=x;const m=Pe(t,"modelValue"),{isFocused:i,focus:$,blur:g}=Ee(t),_=Ce(),R=f(()=>t.id||`checkbox-${_}`);return xe(()=>{const[V,C]=De(u),S=ae.filterProps(t),U=te.filterProps(t);return a(ae,ee({class:["v-checkbox",t.class]},V,S,{modelValue:m.value,"onUpdate:modelValue":E=>m.value=E,id:R.value,focused:i.value,style:t.style}),{...P,default:E=>{let{id:w,messagesId:L,isDisabled:o,isReadonly:s,isValid:B}=E;return a(te,ee(U,{id:w.value,"aria-describedby":L.value,disabled:o.value,readonly:s.value},C,{error:B.value===!1,modelValue:m.value,"onUpdate:modelValue":d=>m.value=d,onFocus:$,onBlur:g}),P)}})}),{}}}),Ae=X({name:"ReservationProgramInfo",props:{reservation:{type:Object,default:null},program:{type:Object,default:null},channel:{type:Object,default:null}},data(){return{Utils:Object.freeze(se),ProgramUtils:Object.freeze(Z)}},computed:{displayProgram(){var t;return((t=this.reservation)==null?void 0:t.program)??this.program},displayChannel(){var t;return((t=this.reservation)==null?void 0:t.channel)??this.channel}},methods:{onLogoError(t){const x=t.target;x.src=`${se.api_base_url}/channels/gr001/logo`}}}),Oe={key:0,class:"program-container"},He={class:"program-info"},Ne=["innerHTML"],je={class:"program-info__broadcaster"},Ke=["src"],ze={class:"program-info__broadcaster-container"},Je={class:"d-flex align-center"},Ze={class:"program-info__broadcaster-number"},qe={class:"program-info__broadcaster-name"},Ge={class:"program-info__broadcaster-time"},Xe=["innerHTML"],Ye={key:0,class:"program-info__genre-container"},Qe={class:"mt-5"},We={key:0,class:"program-info__status"},es={class:"ml-2"},ss={class:"program-info__status"},rs={class:"ml-2"},as={key:1,class:"program-info__status"},ts={class:"ml-2"},ns={class:"program-detail-container"},is={class:"program-detail__heading"},os=["innerHTML"];function ls(t,x,u,P,m,i){const $=Q("Icon");return t.displayProgram&&t.displayChannel?(l(),c("div",Oe,[e("section",He,[e("h1",{class:"program-info__title",innerHTML:t.ProgramUtils.decorateProgramInfo(t.displayProgram,"title")},null,8,Ne),e("div",je,[e("img",{class:"program-info__broadcaster-icon",src:`${t.Utils.api_base_url}/channels/${t.displayChannel.id}/logo`,onError:x[0]||(x[0]=(...g)=>t.onLogoError&&t.onLogoError(...g))},null,40,Ke),e("div",ze,[e("div",Je,[e("div",Ze,"Ch: "+y(t.displayChannel.channel_number),1),e("div",qe,y(t.displayChannel.name),1)]),e("div",Ge,y(t.ProgramUtils.getProgramTime(t.displayProgram)),1)])]),e("div",{class:"program-info__description",innerHTML:t.ProgramUtils.decorateProgramInfo(t.displayProgram,"description")},null,8,Xe),t.displayProgram.genres&&t.displayProgram.genres.length>0?(l(),c("div",Ye,[(l(!0),c(q,null,re(t.displayProgram.genres,(g,_)=>(l(),c("div",{class:"program-info__genre",key:_},y(g.major)+" / "+y(g.middle),1))),128))])):h("",!0),e("div",Qe,[t.displayProgram.video_codec&&t.displayProgram.video_resolution?(l(),c("div",We,[a($,{icon:"fluent:video-16-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",es,"映像: "+y(t.displayProgram.video_codec)+" / "+y(t.displayProgram.video_resolution),1)])):h("",!0),e("div",ss,[a($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",rs,"主音声: "+y(t.displayProgram.primary_audio_type)+" "+y(t.displayProgram.primary_audio_sampling_rate||"Unknown")+" / "+y(t.displayProgram.primary_audio_language),1)]),t.displayProgram.secondary_audio_type?(l(),c("div",as,[a($,{icon:"fluent:headphones-sound-wave-20-filled",height:"17px",style:{"margin-left":"-2px","margin-right":"-1.7px","margin-bottom":"-3px"}}),e("span",ts,"副音声: "+y(t.displayProgram.secondary_audio_type)+" "+y(t.displayProgram.secondary_audio_sampling_rate||"Unknown")+" / "+y(t.displayProgram.secondary_audio_language),1)])):h("",!0)])]),e("section",ns,[(l(!0),c(q,null,re(t.displayProgram.detail??{},(g,_)=>(l(),c("div",{class:"program-detail",key:_},[e("h2",is,y(_),1),e("div",{class:"program-detail__text",innerHTML:t.Utils.URLtoLink(g)},null,8,os)]))),128))])])):h("",!0)}const ds=Y(Ae,[["render",ls],["__scopeId","data-v-a98d9d23"]]),us={class:"reservation-recording-settings"},cs={key:0,class:"recording-warning-banner"},vs={class:"reservation-recording-settings__section"},gs={class:"reservation-recording-settings__header"},_s={class:"reservation-recording-settings__section"},ms={class:"reservation-recording-settings__slider"},ps={class:"reservation-recording-settings__section"},fs={class:"reservation-recording-settings__section"},bs={class:"reservation-recording-settings__section"},ys={class:"reservation-recording-settings__margin-default"},hs={class:"reservation-recording-settings__margin-controls"},ws={class:"reservation-recording-settings__section"},Vs={class:"reservation-recording-settings__section"},ks={class:"reservation-recording-settings__section"},Ps={class:"reservation-recording-settings__section"},Cs={class:"reservation-recording-settings__description"},xs=X({__name:"ReservationRecordingSettings",props:{reservation:{},hasChanges:{type:Boolean}},emits:["updateSettings","changesDetected"],setup(t,{emit:x}){const u=t,P=x,m=Se(),i=D(structuredClone(O(u.reservation.record_settings))),$=D(structuredClone(O(u.reservation.record_settings))),g=f({get:()=>i.value.recording_folders.length>0?i.value.recording_folders[0].recording_folder_path:"",set:o=>{R(o,_.value)}}),_=f({get:()=>i.value.recording_folders.length>0&&i.value.recording_folders[0].recording_file_name_template||"",set:o=>{R(g.value,o)}}),R=(o,s)=>{const B=o.trim()!=="",d=s.trim()!=="";!B&&!d?i.value.recording_folders=[]:(i.value.recording_folders.length===0&&i.value.recording_folders.push({recording_folder_path:"",recording_file_name_template:null,is_oneseg_separate_recording_folder:!1}),i.value.recording_folders[0].recording_folder_path=o,i.value.recording_folders[0].recording_file_name_template=s||null)},V=D(i.value.recording_start_margin===null&&i.value.recording_end_margin===null),C=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],S=[{title:"デフォルト設定を使う",value:"Default"},{title:"録画する",value:"Enable"},{title:"録画しない",value:"Disable"}],U=[{title:"デフォルト設定を使う",value:"Default"},{title:"何もしない",value:"Nothing"},{title:"スタンバイ",value:"Standby"},{title:"スタンバイ(復帰後再起動)",value:"StandbyAndReboot"},{title:"サスペンド",value:"Suspend"},{title:"サスペンド(復帰後再起動)",value:"SuspendAndReboot"},{title:"シャットダウン",value:"Shutdown"}],E=f(()=>JSON.stringify(i.value)!==JSON.stringify($.value));G(E,o=>{P("changesDetected",o)});const w=()=>{P("updateSettings",i.value)},L=()=>{V.value?(i.value.recording_start_margin=null,i.value.recording_end_margin=null):(i.value.recording_start_margin=10,i.value.recording_end_margin=5),w()};return G(()=>u.reservation,o=>{i.value=structuredClone(O(o.record_settings)),$.value=structuredClone(O(o.record_settings))},{deep:!0}),ce(async()=>{await m.fetchServerVersion()}),(o,s)=>{const B=Q("Icon");return l(),c("div",us,[o.reservation.is_recording_in_progress?(l(),c("div",cs,[a(B,{icon:"fluent:warning-16-filled",class:"recording-warning-banner__icon"}),s[11]||(s[11]=e("span",{class:"recording-warning-banner__text"}," 録画中の録画設定の変更はできません。 ",-1))])):h("",!0),e("div",vs,[e("div",gs,[s[12]||(s[12]=e("div",{class:"reservation-recording-settings__label"},"録画予約の有効/無効",-1)),a(Ue,{disabled:o.reservation.is_recording_in_progress,style:{height:"0","margin-top":"-40px","margin-right":"6px"},modelValue:i.value.is_enabled,"onUpdate:modelValue":[s[0]||(s[0]=d=>i.value.is_enabled=d),w],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),s[13]||(s[13]=e("div",{class:"reservation-recording-settings__description mb-0"},[b(" 予約が無効なときは、この番組の録画動作を行いません。"),e("br"),b(" キーワード自動予約条件により不必要な番組が予約されてしまっているときは、予約を無効にしてみてください。(予約削除ではすぐ再追加されてしまい意味がありません。) ")],-1))]),e("div",_s,[s[14]||(s[14]=e("div",{class:"reservation-recording-settings__label"},"録画予約の優先度",-1)),s[15]||(s[15]=e("div",{class:"reservation-recording-settings__description mb-0"}," 放送時間が重なりチューナーが足りないときは、より優先度が高い予約から優先的に録画します。 ",-1)),e("div",ms,[a(Be,{disabled:o.reservation.is_recording_in_progress,modelValue:i.value.priority,"onUpdate:modelValue":[s[1]||(s[1]=d=>i.value.priority=d),w],min:1,max:5,step:1,color:"primary",density:"compact","show-ticks":"always","thumb-label":"","hide-details":""},null,8,["disabled","modelValue"])])]),e("div",ps,[s[16]||(s[16]=e("div",{class:"reservation-recording-settings__label"},"録画フォルダのパス",-1)),s[17]||(s[17]=e("div",{class:"reservation-recording-settings__description"}," 空欄にすると、デフォルトの録画フォルダに保存されます。 ",-1)),a(F,{disabled:o.reservation.is_recording_in_progress,modelValue:g.value,"onUpdate:modelValue":[s[2]||(s[2]=d=>g.value=d),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(m).is_linux_environment?"/mnt/hdd/Records/2025年春アニメ":"E:\\Records\\2025年春アニメ"},null,8,["disabled","modelValue","placeholder"])]),e("div",fs,[s[18]||(s[18]=Re('<div class="reservation-recording-settings__label" data-v-28abe1e8>録画ファイル名テンプレート (マクロ)</div><div class="reservation-recording-settings__description" data-v-28abe1e8> 空欄にすると、デフォルトの録画ファイル名テンプレート (マクロ) が録画ファイル名の変更に利用されます。<br data-v-28abe1e8><div class="mt-1" data-v-28abe1e8><a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_EpgTimer.txt#L929-L1008" target="_blank" data-v-28abe1e8>テンプレート構文の一覧</a> / <a class="link" href="https://github.com/xtne6f/EDCB/blob/work-plus-s/Document/Readme_Mod.txt#%E3%83%9E%E3%82%AF%E3%83%AD" target="_blank" data-v-28abe1e8>xtne6f 版での追加差分</a></div></div>',2)),a(F,{disabled:o.reservation.is_recording_in_progress,modelValue:_.value,"onUpdate:modelValue":[s[3]||(s[3]=d=>_.value=d),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:"$ZtoH(Title)$.ts"},null,8,["disabled","modelValue"])]),e("div",bs,[s[20]||(s[20]=e("div",{class:"reservation-recording-settings__label"},"録画マージン (秒)",-1)),s[21]||(s[21]=e("div",{class:"reservation-recording-settings__description"}," 番組開始時刻の何秒前から録画を開始し、番組終了時刻の何秒後に録画を終了するかの設定です。最低でも5秒以上をおすすめします。(0秒だと番組の冒頭/末尾が欠けてしまいます。) ",-1)),e("div",ys,[a(Fe,{disabled:o.reservation.is_recording_in_progress,id:"use-default-margin",modelValue:V.value,"onUpdate:modelValue":[s[4]||(s[4]=d=>V.value=d),L],color:"primary",density:"compact","hide-details":""},null,8,["disabled","modelValue"]),s[19]||(s[19]=e("label",{class:"reservation-recording-settings__margin-default-text",for:"use-default-margin",style:{"user-select":"none"}}," デフォルト設定を使う ",-1))]),e("div",hs,[a(F,{disabled:o.reservation.is_recording_in_progress||V.value,modelValue:i.value.recording_start_margin,"onUpdate:modelValue":[s[5]||(s[5]=d=>i.value.recording_start_margin=d),w],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組開始",suffix:"秒前",style:{width:"160px"}},null,8,["disabled","modelValue"]),a(F,{disabled:o.reservation.is_recording_in_progress||V.value,modelValue:i.value.recording_end_margin,"onUpdate:modelValue":[s[6]||(s[6]=d=>i.value.recording_end_margin=d),w],modelModifiers:{number:!0},color:"primary",variant:"outlined",density:"compact",type:"number","hide-details":"",prefix:"番組終了",suffix:"秒後",style:{width:"166px"}},null,8,["disabled","modelValue"])])]),e("div",ws,[s[22]||(s[22]=e("div",{class:"reservation-recording-settings__label"},"字幕データ録画設定",-1)),s[23]||(s[23]=e("div",{class:"reservation-recording-settings__description"},[b(" 字幕データはほとんど録画容量を消費しません。"),e("br"),b(" [録画する] に設定しておくことを強くおすすめします。 ")],-1)),a(z,{disabled:o.reservation.is_recording_in_progress,modelValue:i.value.caption_recording_mode,"onUpdate:modelValue":[s[7]||(s[7]=d=>i.value.caption_recording_mode=d),w],items:C,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",Vs,[s[24]||(s[24]=e("div",{class:"reservation-recording-settings__label"},"データ放送録画設定",-1)),s[25]||(s[25]=e("div",{class:"reservation-recording-settings__description"},[b(" データ放送は30分で 500MB 以上録画容量を消費する上、KonomiTV は録画再生時のデータ放送表示に非対応です。"),e("br"),b(" [録画しない] に設定しておくことを強くおすすめします。 ")],-1)),a(z,{disabled:o.reservation.is_recording_in_progress,modelValue:i.value.data_broadcasting_recording_mode,"onUpdate:modelValue":[s[8]||(s[8]=d=>i.value.data_broadcasting_recording_mode=d),w],items:S,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",ks,[s[26]||(s[26]=e("div",{class:"reservation-recording-settings__label"},"録画後動作設定",-1)),s[27]||(s[27]=e("div",{class:"reservation-recording-settings__description"}," 通常は [何もしない] のままで大丈夫です。録画後に録画 PC をスリープさせておきたい方のみ設定してください。環境によっては復帰できず以降の録画に失敗することがあります。 ",-1)),a(z,{disabled:o.reservation.is_recording_in_progress,modelValue:i.value.post_recording_mode,"onUpdate:modelValue":[s[9]||(s[9]=d=>i.value.post_recording_mode=d),w],items:U,color:"primary",variant:"outlined",density:"compact","hide-details":""},null,8,["disabled","modelValue"])]),e("div",Ps,[s[28]||(s[28]=e("div",{class:"reservation-recording-settings__label"},"録画後実行スクリプトのパス",-1)),e("div",Cs," 通常は空欄のままで大丈夫です。録画後に指定の "+y(A(m).is_linux_environment?".sh / .lua":".bat / .ps1 / .lua")+" スクリプトを実行させたい方のみ設定してください。 ",1),a(F,{disabled:o.reservation.is_recording_in_progress,modelValue:i.value.post_recording_bat_file_path,"onUpdate:modelValue":[s[10]||(s[10]=d=>i.value.post_recording_bat_file_path=d),w],color:"primary",variant:"outlined",density:"compact","hide-details":"",placeholder:A(m).is_linux_environment?"/var/local/edcb/transcode.sh":"C:\\DTV\\EDCB\\Transcode.bat"},null,8,["disabled","modelValue","placeholder"])])])}}}),$s=Y(xs,[["__scopeId","data-v-28abe1e8"]]),Ds={class:"reservation-detail-drawer__header"},Rs={class:"reservation-detail-drawer__tab-text"},Ss={class:"reservation-detail-drawer__content"},Us={key:0,class:"reservation-detail-drawer__info"},Bs={key:0,class:"status-banner status-banner--warning mb-4"},Es={key:1,class:"status-banner status-banner--error mb-4"},Is={key:2,class:"status-banner status-banner--info mb-4"},Ts={key:1,class:"reservation-detail-drawer__settings"},Ls={key:0,class:"reservation-detail-drawer__footer"},Ms={class:"reservation-detail-drawer__actions"},Fs={key:1,class:"reservation-detail-drawer__footer"},As={class:"reservation-detail-drawer__actions"},Os={key:0,class:"mb-4"},Hs=["innerHTML"],Ns={class:"text-body-2 text-text-darken-1"},js={key:1,class:"warning-banner warning-banner--recording"},Ks={key:2,class:"warning-banner warning-banner--normal"},zs={key:3,class:"warning-banner warning-banner--keyword mt-3"},Js={class:"warning-banner warning-banner--normal"},Zs=X({__name:"ReservationDetailDrawer",props:{reservation:{},program:{},channel:{},isPastProgram:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue","updated","deleted","added"],setup(t,{emit:x}){const u=t,P=x,m=f({get:()=>u.modelValue,set:n=>P("update:modelValue",n)}),i=Le(),$=f(()=>i.server_settings),g=D("info"),_=D(!1),R=D(!1),V=D(!1),C=D(null),S=D(!1),U=D(!1),E=f(()=>u.reservation!==null),w=f(()=>u.reservation!==null&&u.reservation.id===-1),L=f(()=>E.value&&!w.value),o=f(()=>{var n;return((n=u.reservation)==null?void 0:n.program)??u.program??null}),s=f(()=>$.value.general.backend==="EDCB"),B=f(()=>E.value&&!u.isPastProgram),d=f(()=>w.value&&!u.isPastProgram),ve=f(()=>{var n;return((n=u.reservation)==null?void 0:n.comment.includes("EPG自動予約"))??!1}),ge=f(()=>{var n;return((n=u.reservation)==null?void 0:n.is_recording_in_progress)??!1}),W=f(()=>{var n;return((n=u.reservation)==null?void 0:n.recording_availability)??"Full"}),_e=f(()=>W.value==="Partial"),me=f(()=>W.value==="Unavailable");ce(async()=>{await i.fetchServerSettingsOnce()}),G(m,n=>{n?(g.value="info",_.value=!1,document.documentElement.classList.add("v-overlay-scroll-blocked")):document.documentElement.classList.remove("v-overlay-scroll-blocked")});const H=()=>{if(_.value){U.value=!0;return}m.value=!1},pe=()=>{U.value=!1,_.value=!1,m.value=!1},fe=n=>{C.value=n},be=async()=>{if(!_.value||R.value||!C.value||!u.reservation)return;const n=C.value.caption_recording_mode==="Default",r=C.value.data_broadcasting_recording_mode==="Default";if(n!==r){T.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。");return}R.value=!0;try{if(await J.updateReservation(u.reservation.id,C.value)){T.success("録画設定の変更を保存しました。");const k={...u.reservation,record_settings:C.value};P("updated",k),_.value=!1}}catch(v){console.error("Failed to save settings:",v),T.error("録画設定の保存に失敗しました。")}finally{R.value=!1}},ye=()=>{S.value=!0},he=async()=>{if(S.value=!1,!!u.reservation)try{await J.deleteReservation(u.reservation.id)&&(T.success("録画予約を削除しました。"),P("deleted",u.reservation.id),m.value=!1)}catch(n){console.error("Failed to delete reservation:",n)}},we=async()=>{if(!(V.value||!o.value||!u.reservation)){if(!s.value){T.error("録画予約機能は EDCB バックエンド選択時のみ利用できます。");return}V.value=!0;try{const n=C.value??u.reservation.record_settings,r=n.caption_recording_mode==="Default",v=n.data_broadcasting_recording_mode==="Default";if(r!==v){T.warning("字幕データ録画設定・データ放送録画設定を明示的に設定する際は、両方とも「デフォルト設定を使う」以外に設定してください。"),V.value=!1;return}await J.addReservation(o.value.id,n)&&(T.success("録画予約を追加しました。"),P("added"),m.value=!1)}catch(n){console.error("Failed to add reservation:",n),T.error("録画予約の追加に失敗しました。")}finally{V.value=!1}}};return(n,r)=>{const v=Q("Icon");return l(),c(q,null,[e("div",{class:M(["reservation-detail-drawer__scrim",{"reservation-detail-drawer__scrim--visible":m.value}]),onClick:H},null,2),e("div",{class:M(["reservation-detail-drawer",{"reservation-detail-drawer--visible":m.value}])},[e("div",Ds,[e("div",{class:M(["reservation-detail-drawer__tabs",{"reservation-detail-drawer__tabs--single":!B.value}])},[N((l(),c("div",{class:M(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":g.value==="info"}]),onClick:r[0]||(r[0]=k=>g.value="info")},[a(v,{icon:"fluent:info-12-regular",width:"20px",height:"20px"}),e("span",Rs,"番組情報 "+y(B.value?"":"（終了済み）"),1)],2)),[[K]]),B.value?N((l(),c("div",{key:0,class:M(["reservation-detail-drawer__tab",{"reservation-detail-drawer__tab--active":g.value==="settings"}]),onClick:r[1]||(r[1]=k=>g.value="settings")},[a(v,{icon:"material-symbols:settings-video-camera-outline-rounded",width:"20px",height:"20px"}),r[7]||(r[7]=e("span",{class:"reservation-detail-drawer__tab-text"},"録画設定",-1))],2)),[[K]]):h("",!0)],2),N((l(),c("div",{class:"reservation-detail-drawer__close",onClick:H},[a(v,{icon:"fluent:dismiss-16-filled",width:"22px",height:"22px"})])),[[K]])]),e("div",Ss,[g.value==="info"?(l(),c("div",Us,[_e.value?(l(),c("div",Bs,[a(v,{icon:"fluent:warning-16-filled",class:"status-banner__icon"}),r[8]||(r[8]=e("span",{class:"status-banner__text"},[b(" チューナー不足のため、この番組は一部のみ録画されます。"),e("br"),b(" 優先度を上げるか、重複する録画予約を調整してください。 ")],-1))])):h("",!0),me.value?(l(),c("div",Es,[a(v,{icon:"fluent:error-circle-16-filled",class:"status-banner__icon"}),r[9]||(r[9]=e("span",{class:"status-banner__text"},[b(" チューナー不足のため、この番組は録画できません。"),e("br"),b(" 優先度を上げるか、重複する録画予約を削除してください。 ")],-1))])):h("",!0),!s.value&&!n.isPastProgram&&!L.value?(l(),c("div",Is,[a(v,{icon:"fluent:info-16-regular",class:"status-banner__icon"}),r[10]||(r[10]=e("span",{class:"status-banner__text"}," 録画予約機能は EDCB バックエンド選択時のみ利用できます。 ",-1))])):h("",!0),a(ds,{reservation:n.reservation,program:n.program,channel:n.channel},null,8,["reservation","program","channel"])])):h("",!0),g.value==="settings"&&n.reservation?(l(),c("div",Ts,[a($s,{reservation:n.reservation,"has-changes":_.value,onUpdateSettings:fe,onChangesDetected:r[2]||(r[2]=k=>_.value=k)},null,8,["reservation","has-changes"])])):h("",!0)]),n.isPastProgram?(l(),c("div",Fs,[e("div",As,[a(I,{class:"px-3",variant:"text",onClick:H},{default:p(()=>[a(v,{icon:"fluent:dismiss-16-regular",width:"20px",height:"20px"}),r[14]||(r[14]=e("span",{class:"ml-1"},"閉じる",-1))]),_:1,__:[14]})])])):(l(),c("div",Ls,[e("div",Ms,[L.value?(l(),j(I,{key:0,class:"px-3",variant:"text",onClick:ye},{default:p(()=>[a(v,{icon:"fluent:delete-16-regular",width:"20px",height:"20px"}),r[11]||(r[11]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1,__:[11]})):h("",!0),L.value&&g.value==="settings"?(l(),j(I,{key:1,class:"px-3",color:"secondary",variant:"flat",disabled:!_.value,loading:R.value,onClick:be},{default:p(()=>[a(v,{icon:"fluent:save-16-regular",width:"20px",height:"20px"}),r[12]||(r[12]=e("span",{class:"ml-1"},"変更を保存",-1))]),_:1,__:[12]},8,["disabled","loading"])):h("",!0),d.value?(l(),j(I,{key:2,class:"px-3",color:"secondary",variant:"flat",disabled:!s.value,loading:V.value,onClick:we},{default:p(()=>[a(v,{icon:"fluent:timer-16-regular",width:"20px",height:"20px"}),r[13]||(r[13]=e("span",{class:"ml-1"},"予約を追加",-1))]),_:1,__:[13]},8,["disabled","loading"])):h("",!0)])]))],2),a(ne,{modelValue:S.value,"onUpdate:modelValue":r[4]||(r[4]=k=>S.value=k),"max-width":"715"},{default:p(()=>[a(ie,null,{default:p(()=>[a(oe,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:p(()=>r[15]||(r[15]=[b(" 録画予約を削除しますか？ ",-1)])),_:1,__:[15]}),a(le,{class:"pt-2 pb-0"},{default:p(()=>[n.reservation?(l(),c("div",Os,[e("div",{class:"text-h6 text-text mb-2",innerHTML:A(Z).decorateProgramInfo(n.reservation.program,"title")},null,8,Hs),e("div",Ns,y(A(Z).getProgramTime(n.reservation.program)),1)])):h("",!0),ge.value&&n.reservation?(l(),c("div",js,[a(v,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),r[16]||(r[16]=e("span",{class:"warning-banner__text"},[b(" この番組は現在録画中です。"),e("br"),b(" 予約を削除すると、現在までの録画ファイルは残りますが、残りの期間の録画は中断されます。 ")],-1))])):n.reservation?(l(),c("div",Ks,[a(v,{icon:"fluent:info-16-regular",class:"warning-banner__icon"}),r[17]||(r[17]=e("span",{class:"warning-banner__text"}," 録画予約を削除すると、番組開始時刻までに再度予約を追加しない限り、この番組は録画されません。 ",-1))])):h("",!0),ve.value&&n.reservation?(l(),c("div",zs,[a(v,{icon:"fluent:warning-16-filled",class:"warning-banner__icon"}),r[18]||(r[18]=e("span",{class:"warning-banner__text"},[b(" この予約はキーワード自動予約で追加されました。削除してもすぐに再追加される可能性があります。"),e("br"),b(" 録画が不要な場合は削除ではなく「無効」にすることをおすすめします。 ")],-1))])):h("",!0)]),_:1}),a(de,{class:"pt-4 px-6 pb-6"},{default:p(()=>[a(ue),a(I,{color:"text",variant:"text",onClick:r[3]||(r[3]=k=>S.value=!1)},{default:p(()=>[a(v,{icon:"fluent:dismiss-20-regular",width:"18px",height:"18px"}),r[19]||(r[19]=e("span",{class:"ml-1"},"キャンセル",-1))]),_:1,__:[19]}),a(I,{class:"px-3",color:"error",variant:"flat",onClick:he},{default:p(()=>[a(v,{icon:"fluent:delete-20-regular",width:"18px",height:"18px"}),r[20]||(r[20]=e("span",{class:"ml-1"},"予約を削除",-1))]),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ne,{modelValue:U.value,"onUpdate:modelValue":r[6]||(r[6]=k=>U.value=k),"max-width":"500"},{default:p(()=>[a(ie,null,{default:p(()=>[a(oe,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:p(()=>r[21]||(r[21]=[b(" 変更を破棄しますか？ ",-1)])),_:1,__:[21]}),a(le,{class:"pt-2 pb-0"},{default:p(()=>[e("div",Js,[a(v,{icon:"fluent:info-16-regular",class:"warning-banner__icon"}),r[22]||(r[22]=e("span",{class:"warning-banner__text"},[b(" 録画設定の変更がまだ保存されていません。"),e("br"),b(" このまま閉じると、変更内容は破棄されます。 ")],-1))])]),_:1}),a(de,{class:"pt-4 px-6 pb-6"},{default:p(()=>[a(ue),a(I,{color:"text",variant:"text",onClick:r[5]||(r[5]=k=>U.value=!1)},{default:p(()=>[a(v,{icon:"fluent:arrow-left-20-regular",width:"18px",height:"18px"}),r[23]||(r[23]=e("span",{class:"ml-1"},"編集に戻る",-1))]),_:1,__:[23]}),a(I,{class:"px-3",color:"secondary",variant:"flat",onClick:pe},{default:p(()=>[a(v,{icon:"fluent:dismiss-20-regular",width:"18px",height:"18px"}),r[24]||(r[24]=e("span",{class:"ml-1"},"変更を破棄",-1))]),_:1,__:[24]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),tr=Y(Zs,[["__scopeId","data-v-ffc61844"]]);export{tr as R};
